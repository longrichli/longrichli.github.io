<!DOCTYPE html>
<html lang="zh-cn">

<head>
  <meta charset="utf-8">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer">
  <meta name="description" content="">
  <script src="https://longrichli.github.io/js/quotes.js"></script>
  <link rel="stylesheet" href="https://longrichli.github.io/css/dracula.css" type="text/css">
  <link rel="alternate" type="application/rss+xml" href="https://longrichli.github.io/index.xml" title="RSSè®¢é˜…">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400|Old+Standard+TT:400&display=swap" rel="stylesheet"
    media="print" type="text/css" onload="this.media='all'">
  

  <title>
    
    
     gccä½¿ç”¨æ•™ç¨‹ 
    
  </title>
  <link rel="canonical" href="https://longrichli.github.io/posts/gcc%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/">

  <style>
  * {
    border: 0;
    font: inherit;
    font-size: 100%;
    vertical-align: baseline;
    margin: 0;
    padding: 0;
    color: black;
    text-decoration-skip: ink;
  }

  body {
     
    font-family: 'Myriad Pro';
    font-size: 17px;
    line-height: 160%;
    color: #1d1313;
    max-width: 750px;
    margin: auto;
  }

  p {
    margin: 20px 0;
  }

  a img {
    border: none;
  }

  img {
    margin: 10px auto 10px auto;
    max-width: 100%;
    display: block;
  }

  .left-justify {
    float: left;
  }

  .right-justify {
    float: right;
  }

  pre,
  code {
    font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
    background-color: #f7f7f7;
  }

  code {
    font-size: 12px;
    padding: 4px;
  }

  pre {
    margin-top: 0;
    margin-bottom: 16px;
    word-wrap: normal;
    padding: 16px;
    overflow: auto;
    font-size: 85%;
    line-height: 1.45;
  }

  pre>code {
    padding: 0;
    margin: 0;
    font-size: 100%;
    word-break: normal;
    white-space: pre;
    background: transparent;
    border: 0;
  }

  pre code {
    display: inline;
    padding: 0;
    margin: 0;
    overflow: visible;
    line-height: inherit;
    word-wrap: normal;
    background-color: transparent;
    border: 0;
  }

  pre code::before,
  pre code::after {
    content: normal;
  }

  em,
  q,
  em,
  dfn {
    font-style: italic;
  }

  .sans,
  html .gist .gist-file .gist-meta {
    font-family: "Open Sans", "Myriad Pro", Myriad, sans-serif;
  }

  .mono,
  pre,
  code,
  tt,
  p code,
  li code {
    font-family: Menlo, Monaco, "Andale Mono", "lucida console", "Courier New", monospace;
  }

  .heading,
  .serif,
  h1,
  h2,
  h3 {
    font-family: "Old Standard TT", serif;
  }

  strong {
    font-weight: 600;
  }

  q:before {
    content: "\201C";
  }

  q:after {
    content: "\201D";
  }

  del,
  s {
    text-decoration: line-through;
  }

  blockquote {
    font-family: "Old Standard TT", serif;
    text-align: center;
    padding: 50px;
  }

  blockquote p {
    display: inline-block;
    font-style: italic;
  }

  blockquote:before,
  blockquote:after {
    font-family: "Old Standard TT", serif;
    content: '\201C';
    font-size: 35px;
    color: #403c3b;
  }

  blockquote:after {
    content: '\201D';
  }

  hr {
    width: 100%;
    height: 1px;
    background: #403c3b;
    margin: 25px auto;
  }

  h1 {
    font-size: 35px;
  }

  h2 {
    font-size: 28px;
  }

  h3 {
    font-size: 22px;
    margin-top: 18px;
  }

  h1 a,
  h2 a,
  h3 a {
    text-decoration: none;
  }

  h1,
  h2 {
    margin-top: 28px;
  }

  #sub-header,
  .date {
    color: #403c3b;
    font-size: 13px;
  }

  #sub-header {
    margin: 0 4px;
    text-align: center;
  }

  #nav h1 a {
    font-size: 35px;
    color: #1d1313;
    line-height: 120%;
  }

  .posts_listing a,
  #nav a {
    text-decoration: none;
  }

  li {
    margin-left: 20px;
  }

  ul li {
    margin-left: 5px;
  }

  ul li {
    list-style-type: none;
  }

  ul li:before {
    content: "â€¢ ";
  }

  #nav ul li:before,
  .posts_listing li:before {
    content: '';
    margin-right: 0;
  }

  #content {
    text-align: left;
    width: 100%;
    font-size: 17px;
    padding: 1px 0 80px;
  }

  #content h1,
  #content h2 {
    margin-bottom: 5px;
  }

  #content h2 {
    font-size: 25px;
  }

  #content .entry-content {
    margin-top: 15px;
  }

  #content .date {
    margin-left: 3px;
  }

  #content h1 {
    text-align: center;
    font-size: 30px;
  }

  .highlight {
    background-color: #6d6d6d;
    margin: 10px 0;
  }

  .posts_listing {
    margin: 0 0 50px;
  }

  .posts_listing li {
    margin: 0 0 25px 15px;
  }

  .posts_listing li a:hover,
  #nav a:hover {
    text-decoration: underline;
  }

  #nav {
    text-align: center;
    position: static;
    margin-top: 60px;
  }

  #nav ul {
    display: table;
    margin: 8px auto 0 auto;
  }

  #nav li {
    list-style-type: none;
    display: table-cell;
    font-size: 15px;
    padding: 0 20px;
  }

  #links {
    display: flex;
    justify-content: space-between;
    margin: 50px 0 0 0;
  }

  #links :nth-child(1) {
    margin-right: 0.5em;
    ;
  }

  #links :nth-child(2) {
    margin-left: 0.5em;
    ;
  }

  #not-found {
    text-align: center;
  }

  #not-found a {
    font-family: "Old Standard TT", serif;
    font-size: 200px;
    text-decoration: none;
    display: inline-block;
    padding-top: 225px;
  }

  .tags {
    list-style: none;
     
    padding: 0;
    margin: 0;
    display: flex;
     
    flex-wrap: wrap;
     
    gap: 8px;
     
  }

  .tags li {
    background-color: #f0f0f0;
     
    padding: 4px 10px;
    border-radius: 12px;
     
    font-size: 0.9rem;
  }

  .tags li a {
    color: #555;
    text-decoration: none;
  }

  .tags li a:hover {
    color: #1e90ff;
     
    text-decoration: underline;
  }

  table {
    margin-top: 2em;
    border-collapse: collapse;
     
    width: 100%;
     
  }

  table,
  th,
  td {
    border: 1px solid #ddd;
     
  }

  th,
  td {
    padding: 8px;
     
    text-align: left;
     
  }

  th {
    background-color: #f2f2f2;
     
  }


  .dark-mode *,
  .dark-mode #nav h1 a {
    color: #bbb;
  }

  .dark-mode body {
    background: #212121;
  }

  .dark-mode pre,
  .dark-mode code {
    background-color: #262626;
  }

  .dark-mode #sub-header,
  .dark-mode .date {
    color: #8a8a8a;
  }

  .dark-mode hr {
    background: #858585;
  }

  .dark-mode .article-entry {
    line-height: 1.5;
    margin-bottom: 1em;
    overflow: visible;
  }

  .dark-mode .tags {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .dark-mode .tags li {
    background-color: #444;
     
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 0.9rem;
  }

  .dark-mode .tags li a {
    color: #ddd;
    text-decoration: none;
  }

  .dark-mode .tags li a:hover {
    color: #66b3ff;
    text-decoration: underline;
  }

  .dark-mode table {
    margin-top: 2em;
    border-collapse: collapse;
    width: 100%;
    color: #ddd;
     
  }

  .dark-mode table,
  th,
  td {
    border: 1px solid #555;
     
  }

  .dark-mode th,
  td {
    padding: 8px;
    text-align: left;
  }

  .dark-mode th {
    background-color: #333;
     
    color: #eee;
     
  }

  .dark-mode tr:nth-child(even) {
    background-color: #2a2a2a;
     
  }

  .dark-mode tr:nth-child(odd) {
    background-color: #222;
     
  }

  .tags li:before {
    content: none !important;
  }

  #toggle-theme {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 8px 12px;
    cursor: pointer;
    border-radius: 6px;
    border: none;
    background: none;
    color: white;
    font-size: 14px;
    z-index: 999;
  }

  @media (max-width: 750px) {
    body {
      padding-left: 20px;
      padding-right: 20px;
    }

    #nav h1 a {
      font-size: 28px;
    }

    #nav li {
      font-size: 13px;
      padding: 0 15px;
    }

    #content {
      margin-top: 0;
      padding-top: 50px;
      font-size: 15px;
    }

    .article-entry {
      font-size: 15px;
    }

    #content h1 {
      font-size: 25px;
    }

    #content h2 {
      font-size: 22px;
    }

    .posts_listing li div {
      font-size: 12px;
    }

  }

  @media (max-width: 400px) {
    body {
      padding-left: 20px;
      padding-right: 20px;
    }

    #nav h1 a {
      font-size: 22px;
    }

    #nav li {
      font-size: 12px;
      padding: 0 10px;
    }

    #content {
      margin-top: 0;
      padding-top: 20px;
      font-size: 15px;
    }

    .article-entry {
      font-size: 15px;
    }

    #content h1 {
      font-size: 20px;
    }

    #content h2 {
      font-size: 18px;
    }

    .posts_listing li div {
      font-size: 15px;
    }
  }

</style>

  </head>

<body>
  <section id=nav>
    <h1><a class="h-card" href="https://longrichli.github.io/">Longrichli&#39;s blog</a></h1>
    <ul>
      
      <li><a href="https://longrichli.github.io/">é¦–é¡µ</a></li>
      
      <li><a href="https://longrichli.github.io/archives/">å½’æ¡£</a></li>
      
      <li><a href="https://longrichli.github.io/index.xml">RSS</a></li>
      
    </ul>
  </section>
  <div>
    <div style="margin-top: 2ex;">
      
      <div id="quote" class="article-entry">çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚</div>
      <div id="author" class="article-entry">- é™†æ¸¸ ã€Šå†¬å¤œè¯»ä¹¦ç¤ºå­è¿ã€‹</div>
    </div>
    <hr style="width: 100%;">
  </div>

<section id=content>
  <h1> gccä½¿ç”¨æ•™ç¨‹ </h1>


  <div id="sub-header">
    2025-08-30 22:41 Â· 
    
    
    
    31 minutes read
  </div>


  <div class="entry-content">
    <h2 id="1-å¸¸ç”¨ç¼–è¯‘é€‰é¡¹">1. å¸¸ç”¨ç¼–è¯‘é€‰é¡¹</h2>
<ol>
<li>
<p><strong><code>Wall</code></strong>ï¼šå¯ç”¨å¤§éƒ¨åˆ†è­¦å‘Šä¿¡æ¯ï¼Œå¸®åŠ©ä½ å‘ç°æ½œåœ¨çš„é”™è¯¯ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">gcc -Wall hello.c -o hello
</span></span></code></pre></div></li>
<li>
<p><strong><code>g</code></strong>ï¼šåœ¨ç¼–è¯‘æ—¶ç”Ÿæˆè°ƒè¯•ä¿¡æ¯ï¼Œé€‚ç”¨äºä½¿ç”¨ <code>gdb</code> è¿›è¡Œè°ƒè¯•æ—¶ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">gcc -g hello.c -o hello
</span></span></code></pre></div></li>
<li>
<p><strong><code>O</code></strong>ï¼šä¼˜åŒ–é€‰é¡¹ã€‚<code>O</code> è¿›è¡Œä¸€èˆ¬ä¼˜åŒ–ï¼Œ<code>O2</code> æˆ– <code>O3</code> æä¾›æ›´é«˜çº§åˆ«çš„ä¼˜åŒ–ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">gcc -O2 hello.c -o hello
</span></span></code></pre></div></li>
<li>
<p><strong><code>std=c99</code></strong>ï¼šæŒ‡å®š C è¯­è¨€æ ‡å‡†ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ C99 æ ‡å‡†è¿›è¡Œç¼–è¯‘ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">gcc -std<span class="o">=</span>c99 hello.c -o hello
</span></span></code></pre></div></li>
<li>
<p><strong><code>I&lt;dir&gt;</code></strong>ï¼šæŒ‡å®šå¤´æ–‡ä»¶æœç´¢è·¯å¾„ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">gcc -I/usr/local/include hello.c -o hello
</span></span></code></pre></div></li>
<li>
<p><strong><code>L&lt;dir&gt;</code></strong>ï¼šæŒ‡å®šåº“æ–‡ä»¶æœç´¢è·¯å¾„ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">gcc -L/usr/local/lib hello.c -o hello
</span></span></code></pre></div></li>
<li>
<p><strong><code>l&lt;library&gt;</code></strong>ï¼šé“¾æ¥åº“æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œé“¾æ¥ <code>math</code> åº“ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">gcc hello.c -o hello -lm
</span></span></code></pre></div></li>
</ol>
<h2 id="2-åˆ†æ­¥ç¼–è¯‘è®²è§£">2. åˆ†æ­¥ç¼–è¯‘è®²è§£</h2>
<p>ä» C ç¨‹åºç¼–å†™åˆ°ç”Ÿæˆæœ€ç»ˆå¯æ‰§è¡Œæ–‡ä»¶çš„è¿‡ç¨‹ï¼Œé€šå¸¸æ¶‰åŠä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š<strong>é¢„å¤„ç†ï¼ˆPreprocessingï¼‰</strong>ã€<strong>ç¼–è¯‘ï¼ˆCompilationï¼‰</strong>ã€<strong>æ±‡ç¼–ï¼ˆAssemblyï¼‰</strong> å’Œ <strong>é“¾æ¥ï¼ˆLinkingï¼‰</strong>ã€‚æ¯ä¸ªæ­¥éª¤éƒ½æœ‰ç‰¹å®šçš„ä½œç”¨å’Œç”Ÿæˆçš„ä¸­é—´æ–‡ä»¶ã€‚</p>
<h3 id="1-ç¼–å†™æºä»£ç c-ç¨‹åº">1. ç¼–å†™æºä»£ç ï¼ˆC ç¨‹åºï¼‰</h3>
<p>å‡è®¾ä½ ç¼–å†™äº†ä¸€ä¸ªç®€å•çš„ C ç¨‹åºï¼Œä¿å­˜ä¸º <code>hello.c</code>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="ln">1</span><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;int main() {</span><span class="cp">
</span></span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="cp"></span>    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Hello, World!</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">3</span><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">4</span><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="2-é¢„å¤„ç†preprocessing">2. é¢„å¤„ç†ï¼ˆPreprocessingï¼‰</h3>
<p><strong>é¢„å¤„ç†</strong>æ˜¯ç¼–è¯‘çš„ç¬¬ä¸€æ­¥ã€‚å®ƒä¸»è¦è¿›è¡Œå®å±•å¼€ã€å¤´æ–‡ä»¶åŒ…å«ã€æ¡ä»¶ç¼–è¯‘ç­‰æ“ä½œã€‚é¢„å¤„ç†çš„è¾“å‡ºæ˜¯ä¸€ä¸ªæ‰©å±•åçš„ C ä»£ç æ–‡ä»¶ï¼Œå…¶ä¸­æ‰€æœ‰çš„ <code>#include</code>ã€<code>#define</code> å’Œå…¶ä»–é¢„å¤„ç†æŒ‡ä»¤å·²ç»è¢«å¤„ç†è¿‡äº†ã€‚</p>
<p>é€šè¿‡æ‰§è¡Œ <code>gcc -E hello.c</code>ï¼Œä½ å¯ä»¥æŸ¥çœ‹é¢„å¤„ç†åçš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">gcc -E hello.c
</span></span></code></pre></div><h3 id="é¢„å¤„ç†æ“ä½œåŒ…æ‹¬">é¢„å¤„ç†æ“ä½œåŒ…æ‹¬ï¼š</h3>
<ul>
<li><strong>å¤´æ–‡ä»¶åŒ…å«</strong>ï¼šå°† <code>#include</code> æŒ‡ä»¤çš„å¤´æ–‡ä»¶å†…å®¹æ’å…¥åˆ°æºä»£ç ä¸­ã€‚</li>
<li><strong>å®å±•å¼€</strong>ï¼šå°† <code>#define</code> å®šä¹‰çš„å®è¿›è¡Œæ›¿æ¢ã€‚</li>
<li><strong>åˆ é™¤æ³¨é‡Š</strong>ï¼šå»é™¤æºä»£ç ä¸­çš„æ³¨é‡Šã€‚</li>
</ul>
<p>ä¾‹å¦‚ï¼Œ<code>hello.c</code> ä¸­çš„ <code>#include &lt;stdio.h&gt;</code> ä¼šè¢«å±•å¼€ä¸º <code>stdio.h</code> ä¸­çš„å†…å®¹ã€‚</p>
<p>é¢„å¤„ç†å®Œæˆåï¼Œè¾“å‡ºæ–‡ä»¶é€šå¸¸æ˜¯ä¸€ä¸ªæ‰©å±•åçš„ <code>.i</code> æ–‡ä»¶ã€‚ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>-E</code> é€‰é¡¹æ¥è¾“å‡ºæ­¤æ–‡ä»¶ï¼Œé»˜è®¤ä¸ä¿å­˜ã€‚</p>
<h3 id="3-ç¼–è¯‘compilation">3. ç¼–è¯‘ï¼ˆCompilationï¼‰</h3>
<p><strong>ç¼–è¯‘</strong>æ˜¯å°†é¢„å¤„ç†åçš„ C ä»£ç è½¬åŒ–ä¸ºæ±‡ç¼–ä»£ç çš„è¿‡ç¨‹ã€‚GCC é€šè¿‡ç¼–è¯‘å™¨å°† C ä»£ç è½¬æ¢ä¸ºç‰¹å®šå¹³å°çš„æ±‡ç¼–è¯­è¨€ä»£ç ã€‚</p>
<p>å‘½ä»¤å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">gcc -S hello.c
</span></span></code></pre></div><p>è¿™ä¼šç”Ÿæˆä¸€ä¸ª <code>hello.s</code> æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯æ±‡ç¼–ä»£ç ã€‚æ±‡ç¼–ä»£ç æ˜¯ç”±ç‰¹å®šæŒ‡ä»¤é›†ï¼ˆå¦‚ x86 æˆ– ARMï¼‰ç»„æˆçš„ï¼Œä¾èµ–äºç›®æ ‡å¹³å°çš„æ¶æ„ã€‚</p>
<h3 id="ç¼–è¯‘çš„å…·ä½“æ“ä½œ">ç¼–è¯‘çš„å…·ä½“æ“ä½œï¼š</h3>
<ul>
<li>å°† C ä»£ç ä¸­çš„æ¯ä¸€è¡Œè½¬æ¢ä¸ºæ±‡ç¼–æŒ‡ä»¤ã€‚</li>
<li>ç”Ÿæˆä¸ç›®æ ‡æœºå™¨æ¶æ„ç›¸å…³çš„æ±‡ç¼–ä»£ç ã€‚</li>
</ul>
<p>æ±‡ç¼–ä»£ç æ–‡ä»¶é€šå¸¸æœ‰ <code>.s</code> åç¼€ã€‚</p>
<h3 id="4-æ±‡ç¼–assembly">4. æ±‡ç¼–ï¼ˆAssemblyï¼‰</h3>
<p>åœ¨è¿™ä¸ªæ­¥éª¤ä¸­ï¼Œæ±‡ç¼–ä»£ç å°†è¢«è½¬åŒ–ä¸ºæœºå™¨ä»£ç ï¼ˆä¹Ÿç§°ä¸ºç›®æ ‡ä»£ç ï¼‰ã€‚æœºå™¨ä»£ç æ˜¯è®¡ç®—æœºèƒ½å¤Ÿç†è§£å¹¶æ‰§è¡Œçš„äºŒè¿›åˆ¶æŒ‡ä»¤ã€‚è¿™ä¸ªè¿‡ç¨‹ç”± <strong>æ±‡ç¼–å™¨</strong>ï¼ˆAssemblerï¼‰å®Œæˆã€‚</p>
<p>ä½ å¯ä»¥ä½¿ç”¨ <code>gcc -c</code> è¿›è¡Œè¿™ä¸ªæ­¥éª¤ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">gcc -c hello.c
</span></span></code></pre></div><p>è¿™ä¼šç”Ÿæˆä¸€ä¸ªåä¸º <code>hello.o</code> çš„ç›®æ ‡æ–‡ä»¶ï¼ˆ<code>.o</code> æ˜¯ç›®æ ‡æ–‡ä»¶çš„å¸¸è§åç¼€ï¼‰ã€‚ç›®æ ‡æ–‡ä»¶åŒ…å«æœºå™¨ä»£ç ï¼Œä½†å®ƒå¹¶ä¸å…·å¤‡ç‹¬ç«‹æ‰§è¡Œçš„èƒ½åŠ›ï¼Œå¿…é¡»ç»è¿‡é“¾æ¥ï¼ˆLinkingï¼‰è¿‡ç¨‹ã€‚</p>
<h3 id="æ±‡ç¼–è¿‡ç¨‹">æ±‡ç¼–è¿‡ç¨‹ï¼š</h3>
<ul>
<li>æ±‡ç¼–å™¨å°† <code>.s</code> æ–‡ä»¶ï¼ˆæ±‡ç¼–ä»£ç ï¼‰è½¬åŒ–ä¸º <code>.o</code> æ–‡ä»¶ï¼ˆç›®æ ‡æ–‡ä»¶ï¼‰ã€‚</li>
<li>ç›®æ ‡æ–‡ä»¶æ˜¯æœºå™¨è¯­è¨€ä»£ç çš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œä½†å®ƒä¸åŒ…å«å®Œæ•´çš„ç¨‹åºä¿¡æ¯ï¼Œå¦‚å¤–éƒ¨å‡½æ•°çš„å®ç°ã€‚</li>
</ul>
<h3 id="5-é“¾æ¥linking">5. é“¾æ¥ï¼ˆLinkingï¼‰</h3>
<p><strong>é“¾æ¥</strong>æ˜¯å°†å¤šä¸ªç›®æ ‡æ–‡ä»¶ï¼ˆ<code>.o</code> æ–‡ä»¶ï¼‰å’Œæ‰€éœ€çš„åº“æ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶çš„è¿‡ç¨‹ã€‚é“¾æ¥å™¨ï¼ˆLinkerï¼‰è´Ÿè´£å°†ç¨‹åºä¸­å¼•ç”¨çš„å¤–éƒ¨ç¬¦å·ï¼ˆå¦‚åº“å‡½æ•°ï¼‰ä¸å…¶å®é™…å®šä¹‰ï¼ˆåº“æˆ–å…¶ä»–ç›®æ ‡æ–‡ä»¶ä¸­çš„å®ç°ï¼‰è¿›è¡ŒåŒ¹é…ã€‚</p>
<p>å‡è®¾ä½ æœ‰å¤šä¸ªç›®æ ‡æ–‡ä»¶ï¼Œæ¯”å¦‚ <code>file1.o</code> å’Œ <code>file2.o</code>ï¼Œä½ å¯ä»¥è¿è¡Œï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">gcc file1.o file2.o -o my_program
</span></span></code></pre></div><p>å¯¹äºå•ä¸€æ–‡ä»¶ï¼ˆä¾‹å¦‚ <code>hello.o</code>ï¼‰ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥è¿è¡Œï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">gcc hello.o -o hello
</span></span></code></pre></div><p>è¿™ä¼šå°† <code>hello.o</code> ä¸æ ‡å‡†åº“ï¼ˆå¦‚ C åº“ï¼‰é“¾æ¥èµ·æ¥ï¼Œç”Ÿæˆä¸€ä¸ªåä¸º <code>hello</code> çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</p>
<h3 id="é“¾æ¥è¿‡ç¨‹åŒ…æ‹¬">é“¾æ¥è¿‡ç¨‹åŒ…æ‹¬ï¼š</h3>
<ul>
<li><strong>ç¬¦å·è§£æ</strong>ï¼šé“¾æ¥å™¨æŸ¥æ‰¾ç¨‹åºä¸­çš„ç¬¦å·å¼•ç”¨å¹¶å°†å…¶ä¸ç›®æ ‡æ–‡ä»¶ä¸­çš„å®šä¹‰åŒ¹é…ã€‚</li>
<li><strong>é‡å®šä½</strong>ï¼šå°†å„ä¸ªç›®æ ‡æ–‡ä»¶ä¸­çš„ä»£ç å’Œæ•°æ®æ®µå®šä½åˆ°åˆé€‚çš„å†…å­˜åœ°å€ã€‚</li>
<li><strong>åº“å‡½æ•°é“¾æ¥</strong>ï¼šå¦‚æœç¨‹åºå¼•ç”¨äº†åº“ä¸­çš„å‡½æ•°ï¼ˆä¾‹å¦‚ <code>printf</code>ï¼‰ï¼Œé“¾æ¥å™¨ä¼šå°†è¿™äº›åº“çš„å®ç°é“¾æ¥åˆ°ç¨‹åºä¸­ã€‚</li>
</ul>
<p>é“¾æ¥åï¼Œæœ€ç»ˆç”Ÿæˆä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼ˆå¦‚ <code>hello</code>ï¼‰ã€‚è¿™ä¸ªæ–‡ä»¶å¯ä»¥ç›´æ¥è¿è¡Œã€‚</p>
<h3 id="6-å¯æ‰§è¡Œæ–‡ä»¶">6. å¯æ‰§è¡Œæ–‡ä»¶</h3>
<p>æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆåœ¨ Linux ä¸­é€šå¸¸æ²¡æœ‰åç¼€ï¼ŒWindows ä¸Šå¯èƒ½æ˜¯ <code>.exe</code>ï¼‰å·²ç»å‡†å¤‡å¥½äº†ã€‚å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤è¿è¡Œå®ƒï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">./hello
</span></span></code></pre></div><p>å¦‚æœæ²¡æœ‰å‡ºé”™ï¼Œå®ƒä¼šè¾“å‡ºï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="ln">1</span><span class="cl">Hello, World!
</span></span></code></pre></div><h3 id="æ€»ç»“æµç¨‹">æ€»ç»“æµç¨‹</h3>
<ol>
<li><strong>ç¼–å†™ C ä»£ç </strong>ï¼ˆ<code>hello.c</code>ï¼‰ã€‚</li>
<li><strong>é¢„å¤„ç†</strong>ï¼ˆ<code>gcc -E hello.c</code>ï¼‰ï¼šå¤„ç†å®å®šä¹‰ã€å¤´æ–‡ä»¶å’Œæ³¨é‡Šã€‚</li>
<li><strong>ç¼–è¯‘</strong>ï¼ˆ<code>gcc -S hello.c</code>ï¼‰ï¼šå°† C ä»£ç è½¬æ¢ä¸ºæ±‡ç¼–è¯­è¨€ã€‚</li>
<li><strong>æ±‡ç¼–</strong>ï¼ˆ<code>gcc -c hello.c</code>ï¼‰ï¼šå°†æ±‡ç¼–ä»£ç è½¬æ¢ä¸ºç›®æ ‡æ–‡ä»¶ï¼ˆ<code>.o</code>ï¼‰ã€‚</li>
<li><strong>é“¾æ¥</strong>ï¼ˆ<code>gcc hello.o -o hello</code>ï¼‰ï¼šå°†ç›®æ ‡æ–‡ä»¶å’Œåº“æ–‡ä»¶é“¾æ¥æˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚</li>
<li><strong>æ‰§è¡Œ</strong>ï¼ˆ<code>./hello</code>ï¼‰ï¼šè¿è¡Œç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</li>
</ol>
<h2 id="3-ç¼–è¯‘é™æ€åº“">3. ç¼–è¯‘é™æ€åº“</h2>
<p>é™æ€åº“ï¼ˆStatic Libraryï¼‰æ˜¯ä¸€ä¸ªåŒ…å«ç›®æ ‡æ–‡ä»¶ï¼ˆ<code>.o</code> æ–‡ä»¶ï¼‰é›†åˆçš„å½’æ¡£æ–‡ä»¶ï¼Œå®ƒå¯ä»¥è¢«å¤šä¸ªç¨‹åºå…±äº«ä½¿ç”¨ï¼Œä½†åœ¨é“¾æ¥æ—¶å°†è¿™äº›ç›®æ ‡æ–‡ä»¶åµŒå…¥åˆ°æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚é™æ€åº“é€šå¸¸ä»¥ <code>.a</code>ï¼ˆåœ¨ Linux æˆ– macOS ä¸Šï¼‰æˆ– <code>.lib</code>ï¼ˆåœ¨ Windows ä¸Šï¼‰ä¸ºæ–‡ä»¶åç¼€ã€‚</p>
<h3 id="é™æ€åº“çš„æ„å»ºè¿‡ç¨‹">é™æ€åº“çš„æ„å»ºè¿‡ç¨‹</h3>
<h3 id="1-ç¼–å†™æºä»£ç ">1. ç¼–å†™æºä»£ç </h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº› C æºä»£ç ï¼Œå‡è®¾ä½ æœ‰ä¸€ä¸ªç®€å•çš„åº“ä»£ç  <code>math.c</code> å’Œå®ƒçš„å¤´æ–‡ä»¶ <code>math.h</code>ã€‚</p>
<p><strong>math.c</strong>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="ln">1</span><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;math.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="cp"></span><span class="kt">int</span> <span class="nf">add</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">3</span><span class="cl">    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">4</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">5</span><span class="cl">
</span></span><span class="line"><span class="ln">6</span><span class="cl"><span class="kt">int</span> <span class="nf">subtract</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">7</span><span class="cl">    <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">8</span><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p><strong>math.h</strong>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="ln">1</span><span class="cl"><span class="cp">#ifndef MATH_H
</span></span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="cp">#define MATH_H
</span></span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="ln">4</span><span class="cl"><span class="kt">int</span> <span class="nf">add</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">5</span><span class="cl"><span class="kt">int</span> <span class="nf">subtract</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">6</span><span class="cl">
</span></span><span class="line"><span class="ln">7</span><span class="cl"><span class="cp">#endif
</span></span></span></code></pre></div><h3 id="2-ç¼–è¯‘æºæ–‡ä»¶ä¸ºç›®æ ‡æ–‡ä»¶o-æ–‡ä»¶">2. ç¼–è¯‘æºæ–‡ä»¶ä¸ºç›®æ ‡æ–‡ä»¶ï¼ˆ<code>.o</code> æ–‡ä»¶ï¼‰</h3>
<p>åœ¨ç¼–è¯‘é™æ€åº“ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦å°†æºä»£ç æ–‡ä»¶ç¼–è¯‘ä¸ºç›®æ ‡æ–‡ä»¶ã€‚ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°† <code>math.c</code> ç¼–è¯‘ä¸ºç›®æ ‡æ–‡ä»¶ <code>math.o</code>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">gcc -c math.c -o math.o
</span></span></code></pre></div><p>æ­¤æ—¶ï¼Œ<code>math.o</code> æ˜¯ä¸€ä¸ªåŒ…å« <code>add</code> å’Œ <code>subtract</code> å‡½æ•°å®ç°çš„ç›®æ ‡æ–‡ä»¶ã€‚</p>
<h3 id="3-åˆ›å»ºé™æ€åº“">3. åˆ›å»ºé™æ€åº“</h3>
<p>æ¥ä¸‹æ¥ï¼Œä½ å°†è¿™äº›ç›®æ ‡æ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªé™æ€åº“ã€‚ä½¿ç”¨ <code>ar</code> å‘½ä»¤å°†ç›®æ ‡æ–‡ä»¶ <code>math.o</code> æ‰“åŒ…æˆä¸€ä¸ªé™æ€åº“ <code>libmath.a</code>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">ar rcs libmath.a math.o
</span></span></code></pre></div><ul>
<li><code>ar</code>ï¼šæ˜¯å½’æ¡£å·¥å…·ï¼Œç”¨äºåˆ›å»ºã€ä¿®æ”¹å’Œæå–å½’æ¡£æ–‡ä»¶ã€‚</li>
<li><code>rcs</code>ï¼šæ˜¯ <code>ar</code> çš„é€‰é¡¹ï¼Œå…¶ä¸­ï¼š
<ul>
<li><code>r</code>ï¼šå°†ç›®æ ‡æ–‡ä»¶æ·»åŠ åˆ°å½’æ¡£ä¸­ï¼ˆå¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œåˆ™æ›¿æ¢å®ƒï¼‰ã€‚</li>
<li><code>c</code>ï¼šå¦‚æœå½’æ¡£æ–‡ä»¶ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå®ƒã€‚</li>
<li><code>s</code>ï¼šç”Ÿæˆå½’æ¡£ç´¢å¼•ï¼Œä½¿é“¾æ¥å™¨å¯ä»¥æ›´å¿«åœ°æŸ¥æ‰¾åº“ä¸­çš„ç¬¦å·ã€‚</li>
</ul>
</li>
<li><code>libmath.a</code>ï¼šæ˜¯æˆ‘ä»¬ç”Ÿæˆçš„é™æ€åº“æ–‡ä»¶åï¼ŒæŒ‰ç…§æƒ¯ä¾‹ï¼Œé™æ€åº“é€šå¸¸ä»¥ <code>lib</code> å¼€å¤´ï¼Œ<code>.a</code> ç»“å°¾ã€‚</li>
</ul>
<p>æ­¤æ—¶ï¼Œ<code>libmath.a</code> æ–‡ä»¶å°±ç”Ÿæˆå¥½äº†ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å« <code>math.o</code> ä¸­ç›®æ ‡æ–‡ä»¶å†…å®¹çš„é™æ€åº“ã€‚</p>
<h3 id="4-ä½¿ç”¨é™æ€åº“">4. ä½¿ç”¨é™æ€åº“</h3>
<p>é™æ€åº“æ–‡ä»¶å¯ä»¥åœ¨å…¶ä»–ç¨‹åºä¸­ä½¿ç”¨ã€‚å‡è®¾ä½ æœ‰ä¸€ä¸ªä¸»ç¨‹åº <code>main.c</code>ï¼Œä½ å¸Œæœ›ä½¿ç”¨ <code>libmath.a</code> ä¸­çš„ <code>add</code> å’Œ <code>subtract</code> å‡½æ•°ã€‚</p>
<p><strong>main.c</strong>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="ln">1</span><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;math.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="cp"></span><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">4</span><span class="cl">    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">5</span><span class="cl">    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Addition: %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">));</span>
</span></span><span class="line"><span class="ln">6</span><span class="cl">    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Subtraction: %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="nf">subtract</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">));</span>
</span></span><span class="line"><span class="ln">7</span><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">8</span><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>è¦ä½¿ç”¨é™æ€åº“ï¼Œé¦–å…ˆéœ€è¦ç¼–è¯‘ <code>main.c</code> å¹¶å°† <code>libmath.a</code> é“¾æ¥åˆ°ç¨‹åºä¸­ã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">gcc main.c -L. -lmath -o main
</span></span></code></pre></div><ul>
<li><code>main.c</code>ï¼šä¸»ç¨‹åºçš„æºæ–‡ä»¶ã€‚</li>
<li><code>L.</code>ï¼šæŒ‡å®šåº“çš„æœç´¢è·¯å¾„ï¼Œè¿™é‡Œ <code>.</code> è¡¨ç¤ºå½“å‰ç›®å½•ã€‚</li>
<li><code>lmath</code>ï¼šæŒ‡å®šé“¾æ¥çš„åº“åã€‚<code>l</code> åè·Ÿçš„æ˜¯åº“åï¼Œä¸éœ€è¦åŠ  <code>lib</code> å‰ç¼€å’Œ <code>.a</code> åç¼€ï¼ŒGCC ä¼šè‡ªåŠ¨æœç´¢ <code>libmath.a</code>ã€‚</li>
<li><code>o main</code>ï¼šæŒ‡å®šè¾“å‡ºçš„å¯æ‰§è¡Œæ–‡ä»¶åä¸º <code>main</code>ã€‚</li>
</ul>
<p>æ³¨æ„ï¼šé™æ€åº“é€šå¸¸å­˜æ”¾åœ¨ <code>/usr/lib</code> æˆ– <code>/usr/local/lib</code> ç­‰æ ‡å‡†è·¯å¾„ä¸­ï¼Œå¦‚æœä½ çš„åº“æ–‡ä»¶å­˜æ”¾åœ¨å…¶ä»–åœ°æ–¹ï¼ˆä¾‹å¦‚å½“å‰ç›®å½•ï¼‰ï¼Œéœ€è¦é€šè¿‡ <code>-L</code> å‚æ•°æŒ‡å®šè·¯å¾„ã€‚</p>
<h3 id="5-è¿è¡Œç¨‹åº">5. è¿è¡Œç¨‹åº</h3>
<p>æˆåŠŸç¼–è¯‘å¹¶é“¾æ¥åï¼Œä½ å¯ä»¥è¿è¡Œç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">./main
</span></span></code></pre></div><p>è¾“å‡ºï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="ln">1</span><span class="cl">Addition: 15
</span></span><span class="line"><span class="ln">2</span><span class="cl">Subtraction: 5
</span></span></code></pre></div><h3 id="é™æ€åº“çš„ä¼˜ç¼ºç‚¹">é™æ€åº“çš„ä¼˜ç¼ºç‚¹</h3>
<h3 id="ä¼˜ç‚¹">ä¼˜ç‚¹ï¼š</h3>
<ol>
<li><strong>ç‹¬ç«‹æ€§</strong>ï¼šé™æ€åº“åœ¨ç¼–è¯‘æ—¶å°±ä¸åº”ç”¨ç¨‹åºé“¾æ¥ï¼Œç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶åŒ…å«äº†æ‰€æœ‰ä¾èµ–çš„åº“ä»£ç ï¼Œä¸éœ€è¦è¿è¡Œæ—¶å†å»å¯»æ‰¾åº“æ–‡ä»¶ã€‚</li>
<li><strong>ç‰ˆæœ¬å…¼å®¹æ€§</strong>ï¼šé™æ€åº“æ˜¯å·²ç¼–è¯‘çš„ç›®æ ‡æ–‡ä»¶ï¼Œé¿å…äº†åœ¨è¿è¡Œæ—¶å‡ºç°åŠ¨æ€åº“ç‰ˆæœ¬ä¸åŒ¹é…çš„é—®é¢˜ã€‚</li>
</ol>
<h3 id="ç¼ºç‚¹">ç¼ºç‚¹ï¼š</h3>
<ol>
<li><strong>æ–‡ä»¶ä½“ç§¯å¤§</strong>ï¼šå› ä¸ºæ‰€æœ‰åº“ä»£ç éƒ½è¢«åµŒå…¥åˆ°æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œæ‰€ä»¥é™æ€é“¾æ¥çš„ç¨‹åºæ¯”åŠ¨æ€é“¾æ¥çš„ç¨‹åºè¦å¤§ã€‚</li>
<li><strong>æ›´æ–°ä¸ä¾¿</strong>ï¼šå¦‚æœåº“æ–‡ä»¶æœ‰æ›´æ–°ï¼Œå¿…é¡»é‡æ–°ç¼–è¯‘å’Œé“¾æ¥ä¾èµ–è¿™ä¸ªåº“çš„æ‰€æœ‰ç¨‹åºã€‚ç›¸å¯¹äºåŠ¨æ€åº“ï¼Œé™æ€åº“åœ¨æ›´æ–°æ—¶ä¸å¤Ÿçµæ´»ã€‚</li>
<li><strong>å†…å­˜å ç”¨</strong>ï¼šå¦‚æœå¤šä¸ªç¨‹åºä½¿ç”¨ç›¸åŒçš„é™æ€åº“ï¼Œæ¯ä¸ªç¨‹åºéƒ½ä¼šåŒ…å«åº“çš„å‰¯æœ¬ï¼Œé€ æˆå†…å­˜æµªè´¹ã€‚</li>
</ol>
<h3 id="6-é™æ€åº“ä¸å…±äº«åº“çš„åŒºåˆ«">6. é™æ€åº“ä¸å…±äº«åº“çš„åŒºåˆ«</h3>
<ul>
<li><strong>é™æ€åº“</strong>ï¼ˆ.aï¼‰ï¼šé“¾æ¥æ—¶å°†ä»£ç å¤åˆ¶åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œç”Ÿæˆçš„ç¨‹åºæ–‡ä»¶è¾ƒå¤§ï¼Œä½†ä¸éœ€è¦ä¾èµ–å¤–éƒ¨åº“æ–‡ä»¶è¿è¡Œã€‚</li>
<li><strong>å…±äº«åº“</strong>ï¼ˆåŠ¨æ€åº“ï¼Œ.so / .dllï¼‰ï¼šåº“åœ¨è¿è¡Œæ—¶åŠ è½½ï¼Œä¸éœ€è¦å°†ä»£ç å¤åˆ¶åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œå› æ­¤ç”Ÿæˆçš„ç¨‹åºæ–‡ä»¶è¾ƒå°ã€‚å¤šä¸ªç¨‹åºå¯ä»¥å…±äº«åŒä¸€ä¸ªåŠ¨æ€åº“å‰¯æœ¬ï¼Œåœ¨å†…å­˜ä¸­ä»…åŠ è½½ä¸€æ¬¡ã€‚</li>
</ul>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<p>ç¼–è¯‘é™æ€åº“çš„æ­¥éª¤ï¼š</p>
<ol>
<li>ç¼–å†™æºä»£ç ï¼Œå¹¶å°†æºä»£ç ç¼–è¯‘ä¸ºç›®æ ‡æ–‡ä»¶ï¼ˆ<code>.o</code>ï¼‰ã€‚</li>
<li>ä½¿ç”¨ <code>ar</code> å‘½ä»¤å°†ç›®æ ‡æ–‡ä»¶æ‰“åŒ…æˆé™æ€åº“ï¼ˆ<code>.a</code>ï¼‰ã€‚</li>
<li>åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨é™æ€åº“ï¼Œä½¿ç”¨ <code>L</code> æŒ‡å®šåº“æ–‡ä»¶è·¯å¾„ï¼Œä½¿ç”¨ <code>l</code> æŒ‡å®šåº“åç§°ã€‚</li>
<li>ç¼–è¯‘å¹¶é“¾æ¥åº”ç”¨ç¨‹åºç”Ÿæˆæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</li>
</ol>
<p>é€šè¿‡é™æ€åº“ï¼Œå¯ä»¥å°†å¤šä¸ªç›®æ ‡æ–‡ä»¶è¿›è¡Œç»„åˆï¼Œæ–¹ä¾¿å…±äº«å’Œé‡ç”¨ä»£ç ï¼Œä½†åŒæ—¶ä¹Ÿä¼šå¢åŠ æœ€ç»ˆç¨‹åºçš„å¤§å°ã€‚</p>
<h2 id="4-ç¼–è¯‘å…±äº«åº“">4. ç¼–è¯‘å…±äº«åº“</h2>
<p>ç¼–è¯‘å…±äº«åº“ï¼ˆShared Libraryï¼‰æ˜¯å°†ä»£ç ç¼–è¯‘æˆå¯ä»¥åœ¨å¤šä¸ªç¨‹åºä¹‹é—´å…±äº«çš„å…±äº«åº“æ–‡ä»¶ï¼Œè¿™ç§åº“åœ¨ç¨‹åºè¿è¡Œæ—¶è¢«åŠ è½½ï¼Œè€Œä¸æ˜¯åœ¨ç¼–è¯‘æ—¶é“¾æ¥åˆ°ç¨‹åºä¸­ã€‚å…±äº«åº“é€šå¸¸ä»¥ <code>.so</code>ï¼ˆåœ¨ Linux ä¸Šï¼‰æˆ– <code>.dll</code>ï¼ˆåœ¨ Windows ä¸Šï¼‰ä¸ºæ–‡ä»¶åç¼€ã€‚</p>
<h3 id="å…±äº«åº“çš„æ„å»ºè¿‡ç¨‹">å…±äº«åº“çš„æ„å»ºè¿‡ç¨‹</h3>
<p>ä¸‹é¢ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è®²è§£å¦‚ä½•ç¼–è¯‘å…±äº«åº“ã€‚</p>
<h3 id="1-ç¼–å†™æºä»£ç -1">1. ç¼–å†™æºä»£ç </h3>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç®€å•çš„åº“ä»£ç ï¼Œå‡è®¾åº“çš„åå­—æ˜¯ <code>math.c</code>ã€‚</p>
<p><strong>math.c</strong>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="ln">1</span><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;math.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="kt">int</span> <span class="nf">add</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">4</span><span class="cl">    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">5</span><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="ln">6</span><span class="cl">
</span></span><span class="line"><span class="ln">7</span><span class="cl"><span class="kt">int</span> <span class="nf">subtract</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">8</span><span class="cl">    <span class="k">return</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">9</span><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p><strong>math.h</strong>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="ln">1</span><span class="cl"><span class="cp">#ifndef MATH_H
</span></span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="cp">#define MATH_H
</span></span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="ln">4</span><span class="cl"><span class="kt">int</span> <span class="nf">add</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">5</span><span class="cl"><span class="kt">int</span> <span class="nf">subtract</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">);</span>
</span></span><span class="line"><span class="ln">6</span><span class="cl">
</span></span><span class="line"><span class="ln">7</span><span class="cl"><span class="cp">#endif
</span></span></span></code></pre></div><h3 id="2-ç¼–è¯‘æºä»£ç ä¸ºå…±äº«åº“">2. ç¼–è¯‘æºä»£ç ä¸ºå…±äº«åº“</h3>
<p>è¦å°†ä¸Šè¿°ä»£ç ç¼–è¯‘æˆå…±äº«åº“ï¼Œä½¿ç”¨ <code>gcc</code> çš„ <code>-shared</code> é€‰é¡¹ã€‚åœ¨ Linux ä¸Šï¼Œå…±äº«åº“é€šå¸¸ä»¥ <code>.so</code> åç¼€ç»“å°¾ã€‚</p>
<p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥ç¼–è¯‘ <code>math.c</code> æˆå…±äº«åº“ <code>libmath.so</code>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">gcc -shared -fPIC math.c -o libmath.so
</span></span></code></pre></div><ul>
<li><code>shared</code>ï¼šå‘Šè¯‰ç¼–è¯‘å™¨ç”Ÿæˆå…±äº«åº“ã€‚</li>
<li><code>fPIC</code>ï¼šç”Ÿæˆä½ç½®æ— å…³ä»£ç ï¼ˆPosition Independent Codeï¼‰ã€‚è¿™æ˜¯ç”Ÿæˆå…±äº«åº“çš„æ ‡å‡†é€‰é¡¹ï¼Œå®ƒä½¿å¾—åº“çš„ä»£ç å¯ä»¥åœ¨å†…å­˜ä¸­çš„ä»»ä½•åœ°å€åŠ è½½ã€‚</li>
<li><code>o libmath.so</code>ï¼šæŒ‡å®šè¾“å‡ºæ–‡ä»¶çš„åç§°ï¼Œè¿™é‡Œæ˜¯ <code>libmath.so</code>ï¼Œæ ¹æ®æƒ¯ä¾‹ï¼Œå…±äº«åº“æ–‡ä»¶åé€šå¸¸ä»¥ <code>lib</code> å¼€å¤´ï¼Œ<code>.so</code> ç»“å°¾ã€‚</li>
</ul>
<p>æ‰§è¡Œå®Œè¯¥å‘½ä»¤åï¼Œä½ å°†å¾—åˆ°ä¸€ä¸ªåä¸º <code>libmath.so</code> çš„å…±äº«åº“æ–‡ä»¶ã€‚</p>
<h3 id="3-ä½¿ç”¨åŠ¨æ€åº“">3. ä½¿ç”¨åŠ¨æ€åº“</h3>
<p>æ¥ä¸‹æ¥ï¼Œä½ å¯ä»¥ç¼–å†™ä¸€ä¸ªç¨‹åºæ¥ä½¿ç”¨è¿™ä¸ªå…±äº«åº“ã€‚å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªä¸»ç¨‹åº <code>main.c</code>ï¼Œå®ƒè°ƒç”¨äº† <code>libmath.so</code> ä¸­çš„å‡½æ•°ã€‚</p>
<p><strong>main.c</strong>ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="ln">1</span><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="cp">#include</span> <span class="cpf">&#34;math.h&#34;</span><span class="cp">
</span></span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="ln">4</span><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln">5</span><span class="cl">    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">6</span><span class="cl">    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Addition: %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">));</span>
</span></span><span class="line"><span class="ln">7</span><span class="cl">    <span class="nf">printf</span><span class="p">(</span><span class="s">&#34;Subtraction: %d</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">,</span> <span class="nf">subtract</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">));</span>
</span></span><span class="line"><span class="ln">8</span><span class="cl">    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="ln">9</span><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h3 id="4-ç¼–è¯‘å¹¶é“¾æ¥ç¨‹åº">4. ç¼–è¯‘å¹¶é“¾æ¥ç¨‹åº</h3>
<p>ç¼–è¯‘å¹¶é“¾æ¥ç¨‹åºæ—¶ï¼Œä½ éœ€è¦å‘Šè¯‰ç¼–è¯‘å™¨å¦‚ä½•æ‰¾åˆ°å…±äº«åº“ã€‚å¯ä»¥é€šè¿‡ <code>-L</code> å‚æ•°æŒ‡å®šåŠ¨æ€åº“æ‰€åœ¨ç›®å½•ï¼Œé€šè¿‡ <code>-l</code> å‚æ•°æŒ‡å®šé“¾æ¥çš„åº“åï¼ˆçœç•¥ <code>lib</code> å‰ç¼€å’Œ <code>.so</code> åç¼€ï¼‰ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå¦‚æœ <code>libmath.so</code> å’Œ <code>main.c</code> ä½äºå½“å‰ç›®å½•ä¸‹ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥ç¼–è¯‘å’Œé“¾æ¥ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">gcc main.c -L. -lmath -o main
</span></span></code></pre></div><ul>
<li><code>L.</code>ï¼šå‘Šè¯‰é“¾æ¥å™¨åœ¨å½“å‰ç›®å½•ï¼ˆ<code>.</code>ï¼‰å¯»æ‰¾åº“æ–‡ä»¶ã€‚</li>
<li><code>lmath</code>ï¼šæŒ‡å®šé“¾æ¥çš„åº“åã€‚<code>l</code> åé¢è·Ÿçš„æ˜¯åº“åï¼ˆå»æ‰ <code>lib</code> å‰ç¼€å’Œ <code>.so</code> åç¼€ï¼‰ï¼Œæ‰€ä»¥è¿™é‡Œæ˜¯ <code>lmath</code>ï¼Œè¡¨ç¤ºé“¾æ¥ <code>libmath.so</code>ã€‚</li>
<li><code>o main</code>ï¼šæŒ‡å®šè¾“å‡ºçš„å¯æ‰§è¡Œæ–‡ä»¶åä¸º <code>main</code>ã€‚</li>
</ul>
<h3 id="5-è®¾ç½®å…±äº«åº“çš„è·¯å¾„">5. è®¾ç½®å…±äº«åº“çš„è·¯å¾„</h3>
<p>è¿è¡Œç¨‹åºæ—¶ï¼Œæ“ä½œç³»ç»Ÿéœ€è¦çŸ¥é“å¦‚ä½•æ‰¾åˆ°å…±äº«åº“ã€‚é€šå¸¸ï¼ŒåŠ¨æ€åº“æ–‡ä»¶ä¼šå®‰è£…åœ¨æ ‡å‡†è·¯å¾„ï¼ˆå¦‚ <code>/usr/lib</code> æˆ– <code>/lib</code>ï¼‰ä¸‹ã€‚å¦‚æœåŠ¨æ€åº“ä¸åœ¨æ ‡å‡†è·¯å¾„ä¸­ï¼Œä½ éœ€è¦é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡æ¥å‘Šè¯‰æ“ä½œç³»ç»Ÿåœ¨å“ªé‡ŒæŸ¥æ‰¾å®ƒã€‚</p>
<ul>
<li>åœ¨ Linux ä¸Šï¼Œä½ å¯ä»¥è®¾ç½® <code>LD_LIBRARY_PATH</code> ç¯å¢ƒå˜é‡ï¼ŒæŒ‡å®šåº“æ–‡ä»¶çš„è·¯å¾„ï¼š</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl"><span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>.:<span class="nv">$LD_LIBRARY_PATH</span>
</span></span></code></pre></div><p>è¿™é‡Œ <code>.</code> è¡¨ç¤ºå½“å‰ç›®å½•ã€‚ä½ å¯ä»¥åœ¨ç»ˆç«¯æ‰§è¡Œä¸Šè¿°å‘½ä»¤ï¼Œæˆ–è€…å°†å…¶å†™å…¥ <code>.bashrc</code> æ–‡ä»¶ä»¥ä¾¿æ¯æ¬¡å¯åŠ¨æ—¶è‡ªåŠ¨è®¾ç½®ã€‚</p>
<ul>
<li>åœ¨Linuxä¸Šï¼Œä¹Ÿå¯ä»¥ç¼–è¾‘ <code>/etc/ld.so.conf</code> æ–‡ä»¶ï¼Œå°†å…±äº«åº“çš„è·¯å¾„è¿½åŠ åœ¨ä¸‹é¢ï¼Œä¿å­˜åæ‰§è¡Œ<code>ldconfig</code>å‘½ä»¤ã€‚</li>
</ul>
<h3 id="6-è¿è¡Œç¨‹åº">6. è¿è¡Œç¨‹åº</h3>
<p>ç°åœ¨ï¼Œä½ å¯ä»¥è¿è¡Œç¼–è¯‘åçš„ç¨‹åºï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl">./main
</span></span></code></pre></div><p>è¾“å‡ºå°†æ˜¯ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="ln">1</span><span class="cl">Addition: 15
</span></span><span class="line"><span class="ln">2</span><span class="cl">Subtraction: 5
</span></span></code></pre></div><h3 id="åŠ¨æ€åº“çš„ä¼˜ç¼ºç‚¹">åŠ¨æ€åº“çš„ä¼˜ç¼ºç‚¹</h3>
<h3 id="ä¼˜ç‚¹-1">ä¼˜ç‚¹ï¼š</h3>
<ol>
<li><strong>å†…å­˜å…±äº«</strong>ï¼šå¤šä¸ªç¨‹åºå¯ä»¥å…±äº«åŒä¸€ä¸ªåŠ¨æ€åº“å‰¯æœ¬ï¼ŒèŠ‚çœå†…å­˜ç©ºé—´ã€‚</li>
<li><strong>æ›´æ–°çµæ´»æ€§</strong>ï¼šå¦‚æœåŠ¨æ€åº“æœ‰æ›´æ–°ï¼Œåªéœ€è¦æ›´æ–°åº“æ–‡ä»¶æœ¬èº«ï¼Œæ‰€æœ‰ä¾èµ–è¿™ä¸ªåº“çš„ç¨‹åºä¼šè‡ªåŠ¨ä½¿ç”¨æ–°ç‰ˆæœ¬çš„åº“ï¼Œè€Œä¸éœ€è¦é‡æ–°ç¼–è¯‘ã€‚</li>
<li><strong>å‡å°‘å¯æ‰§è¡Œæ–‡ä»¶ä½“ç§¯</strong>ï¼šåŠ¨æ€åº“æ²¡æœ‰è¢«ç¼–è¯‘åˆ°æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ï¼Œå› æ­¤ç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶è¾ƒå°ã€‚</li>
</ol>
<h3 id="ç¼ºç‚¹-1">ç¼ºç‚¹ï¼š</h3>
<ol>
<li><strong>ä¾èµ–ç®¡ç†</strong>ï¼šç¨‹åºè¿è¡Œæ—¶éœ€è¦ç¡®ä¿åº“çš„æ­£ç¡®ç‰ˆæœ¬åœ¨ç³»ç»Ÿä¸­ï¼Œå¹¶ä¸”åŠ¨æ€åº“æ–‡ä»¶èƒ½å¤Ÿè¢«æ‰¾åˆ°ã€‚å¦‚æœæ‰¾ä¸åˆ°åº“ï¼Œç¨‹åºä¼šå¯åŠ¨å¤±è´¥ã€‚</li>
<li><strong>è¿è¡Œæ—¶å¼€é”€</strong>ï¼šåŠ¨æ€åº“åœ¨è¿è¡Œæ—¶åŠ è½½ï¼Œå› æ­¤ç›¸è¾ƒé™æ€åº“ï¼Œç¨‹åºå¯åŠ¨æ—¶å¯èƒ½ç¨æ…¢ä¸€äº›ã€‚</li>
</ol>
<h3 id="åŠ¨æ€åº“ä¸é™æ€åº“çš„å¯¹æ¯”">åŠ¨æ€åº“ä¸é™æ€åº“çš„å¯¹æ¯”</h3>
<ul>
<li><strong>é™æ€åº“</strong>ï¼ˆ.aï¼‰ï¼š
<ul>
<li>åº“ä»£ç åœ¨ç¼–è¯‘æ—¶è¢«é“¾æ¥åˆ°å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚</li>
<li>å¯æ‰§è¡Œæ–‡ä»¶è¾ƒå¤§ã€‚</li>
<li>æ›´æ–°åº“æ—¶éœ€è¦é‡æ–°ç¼–è¯‘æ‰€æœ‰ä¾èµ–è¯¥åº“çš„ç¨‹åºã€‚</li>
<li>é€‚ç”¨äºä¸éœ€è¦é¢‘ç¹æ›´æ–°åº“çš„åœºæ™¯ã€‚</li>
</ul>
</li>
<li><strong>åŠ¨æ€åº“</strong>ï¼ˆ.soï¼‰ï¼š
<ul>
<li>åº“ä»£ç åœ¨è¿è¡Œæ—¶è¢«åŠ è½½ã€‚</li>
<li>å¯æ‰§è¡Œæ–‡ä»¶è¾ƒå°ã€‚</li>
<li>åŠ¨æ€åº“å¯ä»¥è¢«å¤šä¸ªç¨‹åºå…±äº«ã€‚</li>
<li>æ›´æ–°åº“æ—¶æ— éœ€é‡æ–°ç¼–è¯‘ç¨‹åºï¼Œåªéœ€æ›¿æ¢åº“æ–‡ä»¶ã€‚</li>
<li>é€‚ç”¨äºéœ€è¦å…±äº«å’Œé¢‘ç¹æ›´æ–°åº“çš„åœºæ™¯ã€‚</li>
</ul>
</li>
</ul>
<h3 id="æ€»ç»“-1">æ€»ç»“</h3>
<p>ç¼–è¯‘åŠ¨æ€åº“çš„æ­¥éª¤ï¼š</p>
<ol>
<li>ç¼–å†™æºä»£ç ï¼Œä½¿ç”¨ <code>fPIC</code> é€‰é¡¹ç”Ÿæˆä½ç½®æ— å…³ä»£ç ï¼Œä½¿ç”¨ <code>shared</code> é€‰é¡¹ç”ŸæˆåŠ¨æ€åº“ï¼ˆ<code>.so</code>ï¼‰ã€‚</li>
<li>åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨åŠ¨æ€åº“ï¼Œä½¿ç”¨ <code>L</code> æŒ‡å®šåº“è·¯å¾„ï¼Œä½¿ç”¨ <code>l</code> æŒ‡å®šåº“åç§°ã€‚</li>
<li>é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡ <code>LD_LIBRARY_PATH</code> æˆ–ç¼–è¾‘ <code>/etc/ld.so.conf</code> æ¥æŒ‡å®šåŠ¨æ€åº“çš„æŸ¥æ‰¾è·¯å¾„ã€‚</li>
<li>ç¼–è¯‘å¹¶è¿è¡Œç¨‹åºï¼Œç¡®ä¿åŠ¨æ€åº“èƒ½å¤Ÿåœ¨è¿è¡Œæ—¶è¢«æ­£ç¡®åŠ è½½ã€‚</li>
</ol>
<p>end.</p>

  </div>
  <div>
    
    <ul class="tags">
      
      <li><a href="https://longrichli.github.io/tags/gcc">gcc</a></li>
      
      <li><a href="https://longrichli.github.io/tags/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B">ä½¿ç”¨æ•™ç¨‹</a></li>
      
      <li><a href="https://longrichli.github.io/tags/%E5%8A%A8%E6%80%81%E5%BA%93">åŠ¨æ€åº“</a></li>
      
      <li><a href="https://longrichli.github.io/tags/%E5%85%B1%E4%BA%AB%E5%BA%93">å…±äº«åº“</a></li>
      
    </ul>
    
  </div>
  <hr>
  <div id=links>
    
    <a href="https://longrichli.github.io/posts/hugo%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/">&laquo;&nbsp;hugoä½¿ç”¨æ•™ç¨‹</a>
    
    
    <a href="https://longrichli.github.io/posts/makefile%E7%BC%96%E5%86%99%E6%8C%87%E5%8D%97/">Makefileç¼–å†™æŒ‡å—&nbsp;&raquo;</a>
    
  </div>
</section>
<script src="https://utteranc.es/client.js"
        repo="longrichli/blog-comments"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>


      <script async src="https://www.googletagmanager.com/gtag/js?id=G-JHKFGEGXJ0"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-JHKFGEGXJ0');
        }
      </script>

<dev id="toggle-theme">ğŸŒ™</dev>
<script src="https://longrichli.github.io/js/theme.js"></script>
<script src="https://longrichli.github.io/js/clip.js"></script>
</body>

</html>