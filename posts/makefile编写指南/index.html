<!DOCTYPE html>
<html lang="zh-cn">

<head>
  <meta charset="utf-8">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="referrer" content="no-referrer">
  <meta name="description" content="">
  <script src="https://longrichli.github.io/js/quotes.js"></script>
  <link rel="stylesheet" href="https://longrichli.github.io/css/dracula.css" type="text/css">
  <link rel="alternate" type="application/rss+xml" href="https://longrichli.github.io/index.xml" title="RSSè®¢é˜…">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400|Old+Standard+TT:400&display=swap" rel="stylesheet"
    media="print" type="text/css" onload="this.media='all'">
  

  <title>
    
    
     Makefileç¼–å†™æŒ‡å— 
    
  </title>
  <link rel="canonical" href="https://longrichli.github.io/posts/makefile%E7%BC%96%E5%86%99%E6%8C%87%E5%8D%97/">

  <style>
  * {
    border: 0;
    font: inherit;
    font-size: 100%;
    vertical-align: baseline;
    margin: 0;
    padding: 0;
    color: black;
    text-decoration-skip: ink;
  }

  body {
     
    font-family: 'Myriad Pro';
    font-size: 17px;
    line-height: 160%;
    color: #1d1313;
    max-width: 750px;
    margin: auto;
  }

  p {
    margin: 20px 0;
  }

  a img {
    border: none;
  }

  img {
    margin: 10px auto 10px auto;
    max-width: 100%;
    display: block;
  }

  .left-justify {
    float: left;
  }

  .right-justify {
    float: right;
  }

  pre,
  code {
    font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
    background-color: #f7f7f7;
  }

  code {
    font-size: 12px;
    padding: 4px;
  }

  pre {
    margin-top: 0;
    margin-bottom: 16px;
    word-wrap: normal;
    padding: 16px;
    overflow: auto;
    font-size: 85%;
    line-height: 1.45;
  }

  pre>code {
    padding: 0;
    margin: 0;
    font-size: 100%;
    word-break: normal;
    white-space: pre;
    background: transparent;
    border: 0;
  }

  pre code {
    display: inline;
    padding: 0;
    margin: 0;
    overflow: visible;
    line-height: inherit;
    word-wrap: normal;
    background-color: transparent;
    border: 0;
  }

  pre code::before,
  pre code::after {
    content: normal;
  }

  em,
  q,
  em,
  dfn {
    font-style: italic;
  }

  .sans,
  html .gist .gist-file .gist-meta {
    font-family: "Open Sans", "Myriad Pro", Myriad, sans-serif;
  }

  .mono,
  pre,
  code,
  tt,
  p code,
  li code {
    font-family: Menlo, Monaco, "Andale Mono", "lucida console", "Courier New", monospace;
  }

  .heading,
  .serif,
  h1,
  h2,
  h3 {
    font-family: "Old Standard TT", serif;
  }

  strong {
    font-weight: 600;
  }

  q:before {
    content: "\201C";
  }

  q:after {
    content: "\201D";
  }

  del,
  s {
    text-decoration: line-through;
  }

  blockquote {
    font-family: "Old Standard TT", serif;
    text-align: center;
    padding: 50px;
  }

  blockquote p {
    display: inline-block;
    font-style: italic;
  }

  blockquote:before,
  blockquote:after {
    font-family: "Old Standard TT", serif;
    content: '\201C';
    font-size: 35px;
    color: #403c3b;
  }

  blockquote:after {
    content: '\201D';
  }

  hr {
    width: 100%;
    height: 1px;
    background: #403c3b;
    margin: 25px auto;
  }

  h1 {
    font-size: 35px;
  }

  h2 {
    font-size: 28px;
  }

  h3 {
    font-size: 22px;
    margin-top: 18px;
  }

  h1 a,
  h2 a,
  h3 a {
    text-decoration: none;
  }

  h1,
  h2 {
    margin-top: 28px;
  }

  #sub-header,
  .date {
    color: #403c3b;
    font-size: 13px;
  }

  #sub-header {
    margin: 0 4px;
    text-align: center;
  }

  #nav h1 a {
    font-size: 35px;
    color: #1d1313;
    line-height: 120%;
  }

  .posts_listing a,
  #nav a {
    text-decoration: none;
  }

  li {
    margin-left: 20px;
  }

  ul li {
    margin-left: 5px;
  }

  ul li {
    list-style-type: none;
  }

  ul li:before {
    content: "â€¢ ";
  }

  #nav ul li:before,
  .posts_listing li:before {
    content: '';
    margin-right: 0;
  }

  #content {
    text-align: left;
    width: 100%;
    font-size: 17px;
    padding: 1px 0 80px;
  }

  #content h1,
  #content h2 {
    margin-bottom: 5px;
  }

  #content h2 {
    font-size: 25px;
  }

  #content .entry-content {
    margin-top: 15px;
  }

  #content .date {
    margin-left: 3px;
  }

  #content h1 {
    text-align: center;
    font-size: 30px;
  }

  .highlight {
    background-color: #6d6d6d;
    margin: 10px 0;
  }

  .posts_listing {
    margin: 0 0 50px;
  }

  .posts_listing li {
    margin: 0 0 25px 15px;
  }

  .posts_listing li a:hover,
  #nav a:hover {
    text-decoration: underline;
  }

  #nav {
    text-align: center;
    position: static;
    margin-top: 60px;
  }

  #nav ul {
    display: table;
    margin: 8px auto 0 auto;
  }

  #nav li {
    list-style-type: none;
    display: table-cell;
    font-size: 15px;
    padding: 0 20px;
  }

  #links {
    display: flex;
    justify-content: space-between;
    margin: 50px 0 0 0;
  }

  #links :nth-child(1) {
    margin-right: 0.5em;
    ;
  }

  #links :nth-child(2) {
    margin-left: 0.5em;
    ;
  }

  #not-found {
    text-align: center;
  }

  #not-found a {
    font-family: "Old Standard TT", serif;
    font-size: 200px;
    text-decoration: none;
    display: inline-block;
    padding-top: 225px;
  }

  .tags {
    list-style: none;
     
    padding: 0;
    margin: 0;
    display: flex;
     
    flex-wrap: wrap;
     
    gap: 8px;
     
  }

  .tags li {
    background-color: #f0f0f0;
     
    padding: 4px 10px;
    border-radius: 12px;
     
    font-size: 0.9rem;
  }

  .tags li a {
    color: #555;
    text-decoration: none;
  }

  .tags li a:hover {
    color: #1e90ff;
     
    text-decoration: underline;
  }

  table {
    margin-top: 2em;
    border-collapse: collapse;
     
    width: 100%;
     
  }

  table,
  th,
  td {
    border: 1px solid #ddd;
     
  }

  th,
  td {
    padding: 8px;
     
    text-align: left;
     
  }

  th {
    background-color: #f2f2f2;
     
  }


  .dark-mode *,
  .dark-mode #nav h1 a {
    color: #bbb;
  }

  .dark-mode body {
    background: #212121;
  }

  .dark-mode pre,
  .dark-mode code {
    background-color: #262626;
  }

  .dark-mode #sub-header,
  .dark-mode .date {
    color: #8a8a8a;
  }

  .dark-mode hr {
    background: #858585;
  }

  .dark-mode .article-entry {
    line-height: 1.5;
    margin-bottom: 1em;
    overflow: visible;
  }

  .dark-mode .tags {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .dark-mode .tags li {
    background-color: #444;
     
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 0.9rem;
  }

  .dark-mode .tags li a {
    color: #ddd;
    text-decoration: none;
  }

  .dark-mode .tags li a:hover {
    color: #66b3ff;
    text-decoration: underline;
  }

  .dark-mode table {
    margin-top: 2em;
    border-collapse: collapse;
    width: 100%;
    color: #ddd;
     
  }

  .dark-mode table,
  th,
  td {
    border: 1px solid #555;
     
  }

  .dark-mode th,
  td {
    padding: 8px;
    text-align: left;
  }

  .dark-mode th {
    background-color: #333;
     
    color: #eee;
     
  }

  .dark-mode tr:nth-child(even) {
    background-color: #2a2a2a;
     
  }

  .dark-mode tr:nth-child(odd) {
    background-color: #222;
     
  }

  .tags li:before {
    content: none !important;
  }

  #toggle-theme {
    position: fixed;
    bottom: 20px;
    right: 20px;
    padding: 8px 12px;
    cursor: pointer;
    border-radius: 6px;
    border: none;
    background: none;
    color: white;
    font-size: 14px;
    z-index: 999;
  }

  @media (max-width: 750px) {
    body {
      padding-left: 20px;
      padding-right: 20px;
    }

    #nav h1 a {
      font-size: 28px;
    }

    #nav li {
      font-size: 13px;
      padding: 0 15px;
    }

    #content {
      margin-top: 0;
      padding-top: 50px;
      font-size: 15px;
    }

    .article-entry {
      font-size: 15px;
    }

    #content h1 {
      font-size: 25px;
    }

    #content h2 {
      font-size: 22px;
    }

    .posts_listing li div {
      font-size: 12px;
    }

  }

  @media (max-width: 400px) {
    body {
      padding-left: 20px;
      padding-right: 20px;
    }

    #nav h1 a {
      font-size: 22px;
    }

    #nav li {
      font-size: 12px;
      padding: 0 10px;
    }

    #content {
      margin-top: 0;
      padding-top: 20px;
      font-size: 15px;
    }

    .article-entry {
      font-size: 15px;
    }

    #content h1 {
      font-size: 20px;
    }

    #content h2 {
      font-size: 18px;
    }

    .posts_listing li div {
      font-size: 15px;
    }
  }

</style>

  </head>

<body>
  <section id=nav>
    <h1><a class="h-card" href="https://longrichli.github.io/">Longrichli&#39;s blog</a></h1>
    <ul>
      
      <li><a href="https://longrichli.github.io/">é¦–é¡µ</a></li>
      
      <li><a href="https://longrichli.github.io/archives/">å½’æ¡£</a></li>
      
      <li><a href="https://longrichli.github.io/index.xml">RSS</a></li>
      
    </ul>
  </section>
  <div>
    <div style="margin-top: 2ex;">
      
      <div id="quote" class="article-entry">çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…ï¼Œç»çŸ¥æ­¤äº‹è¦èº¬è¡Œã€‚</div>
      <div id="author" class="article-entry">- é™†æ¸¸ ã€Šå†¬å¤œè¯»ä¹¦ç¤ºå­è¿ã€‹</div>
    </div>
    <hr style="width: 100%;">
  </div>

<section id=content>
  <h1> Makefileç¼–å†™æŒ‡å— </h1>


  <div id="sub-header">
    2025-08-30 23:16 Â· 
    
    
    
    9 minutes read
  </div>


  <div class="entry-content">
    <h2 id="1-makefile-åŸºç¡€æ¦‚å¿µ">1. <strong>Makefile åŸºç¡€æ¦‚å¿µ</strong></h2>
<ol>
<li>
<p>Makefile ç”¨äºè‡ªåŠ¨åŒ–ç¼–è¯‘ã€æ„å»ºã€æµ‹è¯•ã€æ‰“åŒ…ç­‰ä»»åŠ¡ã€‚</p>
</li>
<li>
<p><code>make</code> å·¥å…·ä¼šæ ¹æ® <strong>Makefile</strong> å®šä¹‰çš„è§„åˆ™æ‰§è¡Œä»»åŠ¡ã€‚</p>
</li>
<li>
<p>å¸¸è§æ ¼å¼ï¼š</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="ln">1</span><span class="cl"><span class="nf">target</span><span class="o">:</span> <span class="n">prerequisites</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl">    <span class="nb">command</span>
</span></span></code></pre></div><ul>
<li><strong>target</strong>ï¼šç›®æ ‡ï¼Œä¾‹å¦‚ç”Ÿæˆçš„æ–‡ä»¶æˆ–ä»»åŠ¡åã€‚</li>
<li><strong>prerequisites</strong>ï¼šä¾èµ–æ–‡ä»¶æˆ–å…¶ä»–ç›®æ ‡ã€‚</li>
<li><strong>command</strong>ï¼šæ‰§è¡Œçš„å‘½ä»¤ï¼Œå¿…é¡»ä»¥ <strong>Tab é”®</strong> å¼€å¤´ã€‚</li>
</ul>
</li>
</ol>
<h2 id="2-ç®€å•ç¤ºä¾‹">2. <strong>ç®€å•ç¤ºä¾‹</strong></h2>
<p>å‡è®¾æœ‰ä»¥ä¸‹æºæ–‡ä»¶ï¼š<code>main.c</code> å’Œ <code>functions.c</code>ã€‚</p>
<h3 id="ç¤ºä¾‹-makefile">ç¤ºä¾‹ Makefile</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="c"># å˜é‡å®šä¹‰
</span></span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="c"></span><span class="nv">CC</span> <span class="o">=</span> gcc
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="nv">CFLAGS</span> <span class="o">=</span> -Wall -g
</span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="nv">TARGET</span> <span class="o">=</span> program
</span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="nv">OBJECTS</span> <span class="o">=</span> main.o functions.o
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">
</span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="c"># é»˜è®¤ç›®æ ‡
</span></span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="c"></span><span class="nf">all</span><span class="o">:</span> <span class="k">$(</span><span class="nv">TARGET</span><span class="k">)</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">
</span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="c"># ç¼–è¯‘ç›®æ ‡æ–‡ä»¶
</span></span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="c"></span><span class="nf">$(TARGET)</span><span class="o">:</span> <span class="k">$(</span><span class="nv">OBJECTS</span><span class="k">)</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> -o <span class="k">$(</span>TARGET<span class="k">)</span> <span class="k">$(</span>OBJECTS<span class="k">)</span>
</span></span><span class="line"><span class="ln">13</span><span class="cl">
</span></span><span class="line"><span class="ln">14</span><span class="cl"><span class="c"># ç¼–è¯‘æºæ–‡ä»¶ä¸ºä¸­é—´ç›®æ ‡ (object æ–‡ä»¶)
</span></span></span><span class="line"><span class="ln">15</span><span class="cl"><span class="c"></span><span class="nf">main.o</span><span class="o">:</span> <span class="n">main</span>.<span class="n">c</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> -c main.c
</span></span><span class="line"><span class="ln">17</span><span class="cl">
</span></span><span class="line"><span class="ln">18</span><span class="cl"><span class="nf">functions.o</span><span class="o">:</span> <span class="n">functions</span>.<span class="n">c</span>
</span></span><span class="line"><span class="ln">19</span><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> -c functions.c
</span></span><span class="line"><span class="ln">20</span><span class="cl">
</span></span><span class="line"><span class="ln">21</span><span class="cl"><span class="c"># æ¸…ç†ç›®æ ‡
</span></span></span><span class="line"><span class="ln">22</span><span class="cl"><span class="c"></span><span class="nf">clean</span><span class="o">:</span>
</span></span><span class="line"><span class="ln">23</span><span class="cl">	rm -f <span class="k">$(</span>TARGET<span class="k">)</span> <span class="k">$(</span>OBJECTS<span class="k">)</span>
</span></span><span class="line"><span class="ln">24</span><span class="cl">
</span></span><span class="line"><span class="ln">25</span><span class="cl"><span class="c"># ä¼ªç›®æ ‡ï¼šä¸ç”Ÿæˆæ–‡ä»¶
</span></span></span><span class="line"><span class="ln">26</span><span class="cl"><span class="c"></span><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span> <span class="n">clean</span>
</span></span></code></pre></div><h3 id="æ‰§è¡Œæµç¨‹">æ‰§è¡Œæµç¨‹</h3>
<ol>
<li><strong>æ‰§è¡Œ <code>make</code> å‘½ä»¤</strong>ï¼š
<ul>
<li><code>make</code> ä¼šæŸ¥æ‰¾é»˜è®¤ç›®æ ‡ <code>all</code> å¹¶æ‰§è¡Œç›¸å…³ä¾èµ–è§„åˆ™ã€‚</li>
</ul>
</li>
<li><strong>ç¼–è¯‘ç”Ÿæˆç›®æ ‡æ–‡ä»¶</strong>ï¼š
<ul>
<li><code>main.c</code> å’Œ <code>functions.c</code> ä¼šè¢«ç¼–è¯‘ä¸º <code>main.o</code> å’Œ <code>functions.o</code>ã€‚</li>
</ul>
</li>
<li><strong>é“¾æ¥ç”Ÿæˆæœ€ç»ˆå¯æ‰§è¡Œæ–‡ä»¶</strong>ï¼š
<ul>
<li>é“¾æ¥ä¸­é—´æ–‡ä»¶ï¼Œç”Ÿæˆ <code>program</code>ã€‚</li>
</ul>
</li>
<li><strong>æ‰§è¡Œ <code>make clean</code></strong>ï¼š
<ul>
<li>æ¸…ç†ä¸­é—´æ–‡ä»¶å’Œç›®æ ‡æ–‡ä»¶ã€‚</li>
</ul>
</li>
</ol>
<hr>
<h2 id="3-makefile-è¯­æ³•è¯¦è§£">3. <strong>Makefile è¯­æ³•è¯¦è§£</strong></h2>
<h3 id="31-å˜é‡">3.1 <strong>å˜é‡</strong></h3>
<ul>
<li>ä½¿ç”¨ <code>=</code> å®šä¹‰å˜é‡ã€‚</li>
<li>ä½¿ç”¨ <code>$(VAR)</code> å¼•ç”¨å˜é‡ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="ln">1</span><span class="cl"><span class="nv">CC</span> <span class="o">=</span> gcc
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="nv">CFLAGS</span> <span class="o">=</span> -Wall -g
</span></span></code></pre></div><h3 id="32-è‡ªåŠ¨å˜é‡">3.2 <strong>è‡ªåŠ¨å˜é‡</strong></h3>
<ul>
<li><code>$@</code>ï¼šè¡¨ç¤ºç›®æ ‡æ–‡ä»¶åã€‚</li>
<li><code>$&lt;</code>ï¼šç¬¬ä¸€ä¸ªä¾èµ–æ–‡ä»¶ã€‚</li>
<li><code>$^</code>ï¼šæ‰€æœ‰ä¾èµ–æ–‡ä»¶ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="ln">1</span><span class="cl"><span class="nf">$(TARGET)</span><span class="o">:</span> <span class="k">$(</span><span class="nv">OBJECTS</span><span class="k">)</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> -o <span class="nv">$@</span> $^
</span></span></code></pre></div><h3 id="33-ä¼ªç›®æ ‡-phony">3.3 <strong>ä¼ªç›®æ ‡ (.PHONY)</strong></h3>
<ul>
<li>ç”¨äºæŒ‡å®šä¸ä¼šç”Ÿæˆå®é™…æ–‡ä»¶çš„ç›®æ ‡ï¼Œå¦‚ <code>clean</code>ã€<code>all</code>ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="ln">1</span><span class="cl"><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">clean</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="nf">clean</span><span class="o">:</span>
</span></span><span class="line"><span class="ln">3</span><span class="cl">	rm -f <span class="k">$(</span>TARGET<span class="k">)</span> <span class="k">$(</span>OBJECTS<span class="k">)</span>
</span></span></code></pre></div><h3 id="34-æ¨¡å¼è§„åˆ™">3.4 <strong>æ¨¡å¼è§„åˆ™</strong></h3>
<ul>
<li>é€šè¿‡é€šé…ç¬¦ç®€åŒ–è§„åˆ™ï¼Œ<code>%</code> è¡¨ç¤ºä»»æ„å­—ç¬¦ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="ln">1</span><span class="cl"><span class="nf">%.o</span><span class="o">:</span> %.<span class="n">c</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> -c $&lt; -o <span class="nv">$@</span>
</span></span></code></pre></div><p>è¡¨ç¤ºå°†æ‰€æœ‰ <code>.c</code> æ–‡ä»¶ç¼–è¯‘æˆå¯¹åº”çš„ <code>.o</code> æ–‡ä»¶ã€‚</p>
<hr>
<h2 id="4-makefile-è¿›é˜¶æŠ€å·§">4. <strong>Makefile è¿›é˜¶æŠ€å·§</strong></h2>
<h3 id="41-è‡ªåŠ¨æœç´¢ä¾èµ–">4.1 <strong>è‡ªåŠ¨æœç´¢ä¾èµ–</strong></h3>
<p>ä½¿ç”¨ <code>-MMD</code> é€‰é¡¹è‡ªåŠ¨ç”Ÿæˆä¾èµ–æ–‡ä»¶ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="ln">1</span><span class="cl"><span class="nv">CFLAGS</span> <span class="o">=</span> -Wall -g -MMD
</span></span><span class="line"><span class="ln">2</span><span class="cl"><span class="nf">-include $(OBJECTS</span><span class="o">:</span>.<span class="n">o</span>=.<span class="n">d</span>)
</span></span></code></pre></div><h3 id="42-å¤šç›®æ ‡ç¼–è¯‘">4.2 <strong>å¤šç›®æ ‡ç¼–è¯‘</strong></h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="ln">1</span><span class="cl"><span class="nf">all</span><span class="o">:</span> <span class="n">program</span>1 <span class="n">program</span>2
</span></span><span class="line"><span class="ln">2</span><span class="cl">
</span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="nf">program1</span><span class="o">:</span> <span class="n">program</span>1.<span class="n">c</span>
</span></span><span class="line"><span class="ln">4</span><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> -o program1 program1.c
</span></span><span class="line"><span class="ln">5</span><span class="cl">
</span></span><span class="line"><span class="ln">6</span><span class="cl"><span class="nf">program2</span><span class="o">:</span> <span class="n">program</span>2.<span class="n">c</span>
</span></span><span class="line"><span class="ln">7</span><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> -o program2 program2.c
</span></span></code></pre></div><h3 id="43-å®šä¹‰å‡½æ•°">4.3 <strong>å®šä¹‰å‡½æ•°</strong></h3>
<p>ä½¿ç”¨ <code>define</code> å®šä¹‰å¤æ‚æ“ä½œã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="ln">1</span><span class="cl"><span class="err">define</span> <span class="err">compile</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl">	<span class="k">$(</span><span class="nv">CC</span><span class="k">)</span> <span class="k">$(</span><span class="nv">CFLAGS</span><span class="k">)</span> <span class="err">-c</span> <span class="err">$1.c</span> <span class="err">-o</span> <span class="err">$1.o</span>
</span></span><span class="line"><span class="ln">3</span><span class="cl"><span class="err">endef</span>
</span></span><span class="line"><span class="ln">4</span><span class="cl">
</span></span><span class="line"><span class="ln">5</span><span class="cl"><span class="nf">main.o</span><span class="o">:</span>
</span></span><span class="line"><span class="ln">6</span><span class="cl">	<span class="k">$(</span>call compile, main<span class="k">)</span>
</span></span></code></pre></div><hr>
<h2 id="5-å¸¸ç”¨å‘½ä»¤æ€»ç»“">5. <strong>å¸¸ç”¨å‘½ä»¤æ€»ç»“</strong></h2>
<table>
  <thead>
      <tr>
          <th>å‘½ä»¤</th>
          <th>è¯´æ˜</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>make</code></td>
          <td>æ‰§è¡Œé»˜è®¤ç›®æ ‡ï¼ˆç¬¬ä¸€ä¸ªè§„åˆ™ï¼‰</td>
      </tr>
      <tr>
          <td><code>make target</code></td>
          <td>æ‰§è¡ŒæŒ‡å®šç›®æ ‡</td>
      </tr>
      <tr>
          <td><code>make clean</code></td>
          <td>æ‰§è¡Œ<code>clean</code>è§„åˆ™</td>
      </tr>
      <tr>
          <td><code>make -jN</code></td>
          <td>å¹¶è¡Œæ‰§è¡Œä»»åŠ¡ï¼ŒN è¡¨ç¤ºçº¿ç¨‹æ•°</td>
      </tr>
      <tr>
          <td><code>make -n</code></td>
          <td>åªæ‰“å°å‘½ä»¤ï¼Œä¸æ‰§è¡Œ</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="6-ç¤ºä¾‹æ‰§è¡Œè¿‡ç¨‹">6. <strong>ç¤ºä¾‹æ‰§è¡Œè¿‡ç¨‹</strong></h2>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="ln">1</span><span class="cl"><span class="c1"># ç¼–è¯‘é¡¹ç›®</span>
</span></span><span class="line"><span class="ln">2</span><span class="cl">make
</span></span><span class="line"><span class="ln">3</span><span class="cl">
</span></span><span class="line"><span class="ln">4</span><span class="cl"><span class="c1"># æ‰§è¡Œæ¸…ç†</span>
</span></span><span class="line"><span class="ln">5</span><span class="cl">make clean
</span></span><span class="line"><span class="ln">6</span><span class="cl">
</span></span><span class="line"><span class="ln">7</span><span class="cl"><span class="c1"># ä½¿ç”¨å¤šçº¿ç¨‹ç¼–è¯‘</span>
</span></span><span class="line"><span class="ln">8</span><span class="cl">make -j4
</span></span></code></pre></div><hr>
<h2 id="7-åŸºæœ¬ç¤ºä¾‹">7. åŸºæœ¬ç¤ºä¾‹</h2>
<h3 id="71-ç¼–è¯‘makefileæ–‡ä»¶åŒçº§ç›®å½•ä¸‹çš„-c-æ–‡ä»¶">7.1 ç¼–è¯‘Makefileæ–‡ä»¶åŒçº§ç›®å½•ä¸‹çš„ .c æ–‡ä»¶</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="c"># å˜é‡å®šä¹‰
</span></span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="c"></span><span class="nv">CC</span> <span class="o">=</span> gcc
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="nv">CFLAGS</span> <span class="o">=</span> -Wall -g
</span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="nv">TARGET</span> <span class="o">=</span> program
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">
</span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="c"># è‡ªåŠ¨æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ .c æ–‡ä»¶
</span></span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="c"></span><span class="nv">SRCS</span> <span class="o">:=</span> <span class="k">$(</span>wildcard *.c<span class="k">)</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="nv">OBJS</span> <span class="o">:=</span> <span class="k">$(</span>SRCS:.c<span class="o">=</span>.o<span class="k">)</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">
</span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="c"># é»˜è®¤ç›®æ ‡
</span></span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="c"></span><span class="nf">all</span><span class="o">:</span> <span class="k">$(</span><span class="nv">TARGET</span><span class="k">)</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">
</span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="c"># é“¾æ¥ç›®æ ‡æ–‡ä»¶
</span></span></span><span class="line"><span class="ln">14</span><span class="cl"><span class="c"></span><span class="nf">$(TARGET)</span><span class="o">:</span> <span class="k">$(</span><span class="nv">OBJS</span><span class="k">)</span>
</span></span><span class="line"><span class="ln">15</span><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> -o <span class="nv">$@</span> <span class="k">$(</span>OBJS<span class="k">)</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">
</span></span><span class="line"><span class="ln">17</span><span class="cl"><span class="c"># ç¼–è¯‘ .c æ–‡ä»¶ä¸º .o æ–‡ä»¶ï¼ˆæ¨¡å¼è§„åˆ™ï¼‰
</span></span></span><span class="line"><span class="ln">18</span><span class="cl"><span class="c"></span><span class="nf">%.o</span><span class="o">:</span> %.<span class="n">c</span>
</span></span><span class="line"><span class="ln">19</span><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> -c $&lt; -o <span class="nv">$@</span>
</span></span><span class="line"><span class="ln">20</span><span class="cl">
</span></span><span class="line"><span class="ln">21</span><span class="cl"><span class="c"># æ¸…ç†ç›®æ ‡
</span></span></span><span class="line"><span class="ln">22</span><span class="cl"><span class="c"></span><span class="nf">clean</span><span class="o">:</span>
</span></span><span class="line"><span class="ln">23</span><span class="cl">	rm -f <span class="k">$(</span>TARGET<span class="k">)</span> <span class="k">$(</span>OBJS<span class="k">)</span>
</span></span><span class="line"><span class="ln">24</span><span class="cl">
</span></span><span class="line"><span class="ln">25</span><span class="cl"><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span> <span class="n">clean</span>
</span></span></code></pre></div><h3 id="72-ç¼–è¯‘makefileæ–‡ä»¶æ‰€åœ¨ç›®å½•åŠå­ç›®å½•çš„cæ–‡ä»¶">7.2 ç¼–è¯‘Makefileæ–‡ä»¶æ‰€åœ¨ç›®å½•åŠå­ç›®å½•çš„cæ–‡ä»¶</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="c"># å˜é‡å®šä¹‰
</span></span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="c"></span><span class="nv">CC</span> <span class="o">=</span> gcc
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="nv">CFLAGS</span> <span class="o">=</span> -Wall -g
</span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="nv">TARGET</span> <span class="o">=</span> program
</span></span><span class="line"><span class="ln"> 5</span><span class="cl">
</span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="c"># æŸ¥æ‰¾å½“å‰ç›®å½•åŠæ‰€æœ‰å­ç›®å½•ä¸­çš„ .c æ–‡ä»¶
</span></span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="c"></span><span class="nv">SRCS</span> <span class="o">:=</span> <span class="k">$(</span>shell find . -name <span class="s2">&#34;*.c&#34;</span><span class="k">)</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="nv">OBJS</span> <span class="o">:=</span> <span class="k">$(</span>SRCS:.c<span class="o">=</span>.o<span class="k">)</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">
</span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="c"># é»˜è®¤ç›®æ ‡
</span></span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="c"></span><span class="nf">all</span><span class="o">:</span> <span class="k">$(</span><span class="nv">TARGET</span><span class="k">)</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">
</span></span><span class="line"><span class="ln">13</span><span class="cl"><span class="c"># é“¾æ¥ç›®æ ‡æ–‡ä»¶
</span></span></span><span class="line"><span class="ln">14</span><span class="cl"><span class="c"></span><span class="nf">$(TARGET)</span><span class="o">:</span> <span class="k">$(</span><span class="nv">OBJS</span><span class="k">)</span>
</span></span><span class="line"><span class="ln">15</span><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> -o <span class="nv">$@</span> <span class="k">$(</span>OBJS<span class="k">)</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">
</span></span><span class="line"><span class="ln">17</span><span class="cl"><span class="c"># ç¼–è¯‘ .c æ–‡ä»¶ä¸º .o æ–‡ä»¶ï¼ˆæ¨¡å¼è§„åˆ™ï¼‰
</span></span></span><span class="line"><span class="ln">18</span><span class="cl"><span class="c"></span><span class="nf">%.o</span><span class="o">:</span> %.<span class="n">c</span>
</span></span><span class="line"><span class="ln">19</span><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> -c $&lt; -o <span class="nv">$@</span>
</span></span><span class="line"><span class="ln">20</span><span class="cl">
</span></span><span class="line"><span class="ln">21</span><span class="cl"><span class="c"># æ¸…ç†ç›®æ ‡
</span></span></span><span class="line"><span class="ln">22</span><span class="cl"><span class="c"></span><span class="nf">clean</span><span class="o">:</span>
</span></span><span class="line"><span class="ln">23</span><span class="cl">	rm -f <span class="k">$(</span>TARGET<span class="k">)</span> <span class="k">$(</span>OBJS<span class="k">)</span>
</span></span><span class="line"><span class="ln">24</span><span class="cl">
</span></span><span class="line"><span class="ln">25</span><span class="cl"><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span> <span class="n">clean</span>
</span></span></code></pre></div><h3 id="73-å¤šä¸ªmakefileç¼–è¯‘">7.3 å¤šä¸ªMakefileç¼–è¯‘</h3>
<ol>
<li>å‡è®¾é¡¹ç›®ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</li>
</ol>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="err">project/</span>
</span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="err">â”œâ”€â”€</span> <span class="err">Makefile</span>           <span class="c"># é¡¶å±‚ Makefile
</span></span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="c"></span><span class="err">â”œâ”€â”€</span> <span class="err">main.c</span>
</span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="err">â”œâ”€â”€</span> <span class="err">src/</span>
</span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="err">Makefile</span>       <span class="c"># src ç›®å½•ä¸‹çš„ Makefile
</span></span></span><span class="line"><span class="ln"> 6</span><span class="cl"><span class="c"></span><span class="err">â”‚</span>   <span class="err">â”œâ”€â”€</span> <span class="err">func1.c</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="err">â”‚</span>   <span class="err">â””â”€â”€</span> <span class="err">func2.c</span>
</span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="err">â””â”€â”€</span> <span class="err">lib/</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">    <span class="err">â”œâ”€â”€</span> <span class="err">Makefile</span>       <span class="c"># lib ç›®å½•ä¸‹çš„ Makefile
</span></span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="c"></span>    â”œâ”€â”€ utils.c
</span></span><span class="line"><span class="ln">11</span><span class="cl">    â””â”€â”€ helper.c
</span></span></code></pre></div><ol>
<li>é¡¶å±‚ <code>Makefile</code></li>
</ol>
<p>é¡¶å±‚ <code>Makefile</code> è´Ÿè´£è°ƒç”¨å­ç›®å½•ä¸­çš„ <code>Makefile</code> å¹¶ç¼–è¯‘æ•´ä¸ªé¡¹ç›®ã€‚</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="c"># å˜é‡å®šä¹‰
</span></span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="c"></span><span class="nv">SUBDIRS</span> <span class="o">=</span> src lib
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="nv">CC</span> <span class="o">=</span> gcc
</span></span><span class="line"><span class="ln"> 4</span><span class="cl"><span class="nv">CFLAGS</span> <span class="o">=</span> -Wall -g
</span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="nv">TARGET</span> <span class="o">=</span> program
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">
</span></span><span class="line"><span class="ln"> 7</span><span class="cl"><span class="c"># é»˜è®¤ç›®æ ‡
</span></span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="c"></span><span class="nf">all</span><span class="o">:</span> <span class="n">subdirs</span> <span class="k">$(</span><span class="nv">TARGET</span><span class="k">)</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">
</span></span><span class="line"><span class="ln">10</span><span class="cl"><span class="c"># ç¼–è¯‘ä¸»ç¨‹åº
</span></span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="c"></span><span class="nf">main.o</span><span class="o">:</span> <span class="n">main</span>.<span class="n">c</span>
</span></span><span class="line"><span class="ln">12</span><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> -c main.c -o main.o
</span></span><span class="line"><span class="ln">13</span><span class="cl">
</span></span><span class="line"><span class="ln">14</span><span class="cl"><span class="c"># é“¾æ¥æ‰€æœ‰ç›®æ ‡æ–‡ä»¶
</span></span></span><span class="line"><span class="ln">15</span><span class="cl"><span class="c"></span><span class="nf">$(TARGET)</span><span class="o">:</span> <span class="n">main</span>.<span class="n">o</span>
</span></span><span class="line"><span class="ln">16</span><span class="cl">	@echo <span class="s2">&#34;Linking target: </span><span class="k">$(</span>TARGET<span class="k">)</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="ln">17</span><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> -o <span class="k">$(</span>TARGET<span class="k">)</span> main.o src/*.o lib/*.o
</span></span><span class="line"><span class="ln">18</span><span class="cl">
</span></span><span class="line"><span class="ln">19</span><span class="cl"><span class="c"># é€’å½’ç¼–è¯‘å­ç›®å½•
</span></span></span><span class="line"><span class="ln">20</span><span class="cl"><span class="c"></span><span class="nf">subdirs</span><span class="o">:</span>
</span></span><span class="line"><span class="ln">21</span><span class="cl">	@for dir in <span class="k">$(</span>SUBDIRS<span class="k">)</span><span class="p">;</span> <span class="k">do</span> <span class="se">\
</span></span></span><span class="line"><span class="ln">22</span><span class="cl"><span class="se"></span>		<span class="nb">echo</span> <span class="s2">&#34;Building in </span><span class="nv">$$</span><span class="s2">dir...&#34;</span><span class="p">;</span> <span class="se">\
</span></span></span><span class="line"><span class="ln">23</span><span class="cl"><span class="se"></span>		<span class="k">$(</span>MAKE<span class="k">)</span> -C <span class="nv">$$</span>dir<span class="p">;</span> <span class="se">\
</span></span></span><span class="line"><span class="ln">24</span><span class="cl"><span class="se"></span>	<span class="k">done</span>
</span></span><span class="line"><span class="ln">25</span><span class="cl">
</span></span><span class="line"><span class="ln">26</span><span class="cl"><span class="c"># æ¸…ç†ç›®æ ‡
</span></span></span><span class="line"><span class="ln">27</span><span class="cl"><span class="c"></span><span class="nf">clean</span><span class="o">:</span>
</span></span><span class="line"><span class="ln">28</span><span class="cl">	@for dir in <span class="k">$(</span>SUBDIRS<span class="k">)</span><span class="p">;</span> <span class="k">do</span> <span class="se">\
</span></span></span><span class="line"><span class="ln">29</span><span class="cl"><span class="se"></span>		<span class="nb">echo</span> <span class="s2">&#34;Cleaning in </span><span class="nv">$$</span><span class="s2">dir...&#34;</span><span class="p">;</span> <span class="se">\
</span></span></span><span class="line"><span class="ln">30</span><span class="cl"><span class="se"></span>		<span class="k">$(</span>MAKE<span class="k">)</span> -C <span class="nv">$$</span>dir clean<span class="p">;</span> <span class="se">\
</span></span></span><span class="line"><span class="ln">31</span><span class="cl"><span class="se"></span>	<span class="k">done</span>
</span></span><span class="line"><span class="ln">32</span><span class="cl">	rm -f <span class="k">$(</span>TARGET<span class="k">)</span> main.o
</span></span><span class="line"><span class="ln">33</span><span class="cl">
</span></span><span class="line"><span class="ln">34</span><span class="cl"><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span> <span class="n">clean</span> <span class="n">subdirs</span>
</span></span></code></pre></div><ol>
<li>å­ç›®å½•çš„ <code>Makefile</code></li>
</ol>
<p><code>s**rc/Makefile**</code></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="nv">CC</span> <span class="o">=</span> gcc
</span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="nv">CFLAGS</span> <span class="o">=</span> -Wall -g
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="nv">OBJS</span> <span class="o">=</span> func1.o func2.o
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">
</span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="nf">all</span><span class="o">:</span> <span class="k">$(</span><span class="nv">OBJS</span><span class="k">)</span>%.<span class="n">o</span>: %.<span class="n">c</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> -c $&lt; -o <span class="nv">$@</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">
</span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="nf">clean</span><span class="o">:</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">	rm -f <span class="k">$(</span>OBJS<span class="k">)</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">
</span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span> <span class="n">clean</span>
</span></span></code></pre></div><p><strong><code>lib/Makefile</code></strong></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="line"><span class="ln"> 1</span><span class="cl"><span class="nv">CC</span> <span class="o">=</span> gcc
</span></span><span class="line"><span class="ln"> 2</span><span class="cl"><span class="nv">CFLAGS</span> <span class="o">=</span> -Wall -g
</span></span><span class="line"><span class="ln"> 3</span><span class="cl"><span class="nv">OBJS</span> <span class="o">=</span> utils.o helper.o
</span></span><span class="line"><span class="ln"> 4</span><span class="cl">
</span></span><span class="line"><span class="ln"> 5</span><span class="cl"><span class="nf">all</span><span class="o">:</span> <span class="k">$(</span><span class="nv">OBJS</span><span class="k">)</span>%.<span class="n">o</span>: %.<span class="n">c</span>
</span></span><span class="line"><span class="ln"> 6</span><span class="cl">	<span class="k">$(</span>CC<span class="k">)</span> <span class="k">$(</span>CFLAGS<span class="k">)</span> -c $&lt; -o <span class="nv">$@</span>
</span></span><span class="line"><span class="ln"> 7</span><span class="cl">
</span></span><span class="line"><span class="ln"> 8</span><span class="cl"><span class="nf">clean</span><span class="o">:</span>
</span></span><span class="line"><span class="ln"> 9</span><span class="cl">	rm -f <span class="k">$(</span>OBJS<span class="k">)</span>
</span></span><span class="line"><span class="ln">10</span><span class="cl">
</span></span><span class="line"><span class="ln">11</span><span class="cl"><span class="nf">.PHONY</span><span class="o">:</span> <span class="n">all</span> <span class="n">clean</span>
</span></span></code></pre></div><ol>
<li>å·¥ä½œåŸç†</li>
<li>é¡¶å±‚ <code>Makefile</code>ï¼š
<ul>
<li>å®šä¹‰äº†å­ç›®å½• <code>SUBDIRS = src lib</code>ã€‚</li>
<li>ä½¿ç”¨ <code>$(MAKE) -C</code> å‘½ä»¤è¿›å…¥å­ç›®å½•å¹¶æ‰§è¡Œå­ç›®å½•çš„ <code>Makefile</code>ã€‚</li>
</ul>
</li>
<li><strong>é€’å½’ç¼–è¯‘</strong>ï¼š
<ul>
<li><code>$(MAKE) -C dir</code> ä¼šåœ¨ <code>dir</code> ç›®å½•ä¸­æ‰§è¡Œ <code>make</code>ã€‚</li>
<li>å­ç›®å½•çš„ <code>Makefile</code> è´Ÿè´£ç¼–è¯‘è‡ªå·±çš„ <code>.c</code> æ–‡ä»¶å¹¶ç”Ÿæˆ <code>.o</code> æ–‡ä»¶ã€‚</li>
</ul>
</li>
<li><strong>ä¸»ç¨‹åºé“¾æ¥</strong>ï¼š
<ul>
<li>åœ¨é¡¶å±‚ <code>Makefile</code> ä¸­ï¼Œé“¾æ¥ä¸»ç¨‹åºçš„ <code>main.o</code> å’Œå­ç›®å½•ç”Ÿæˆçš„æ‰€æœ‰ <code>.o</code> æ–‡ä»¶ï¼Œç”Ÿæˆæœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚</li>
</ul>
</li>
<li><strong>æ¸…ç†ç›®æ ‡</strong>ï¼š
<ul>
<li><code>make clean</code> ä¼šé€’å½’è°ƒç”¨å­ç›®å½•çš„ <code>Makefile</code> ä¸­çš„ <code>clean</code> ç›®æ ‡ï¼Œåˆ é™¤æ‰€æœ‰ä¸­é—´æ–‡ä»¶ã€‚</li>
</ul>
</li>
</ol>
<p>end.</p>

  </div>
  <div>
    
    <ul class="tags">
      
      <li><a href="https://longrichli.github.io/tags/make">make</a></li>
      
      <li><a href="https://longrichli.github.io/tags/makefile">Makefile</a></li>
      
      <li><a href="https://longrichli.github.io/tags/%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B">ä½¿ç”¨æ•™ç¨‹</a></li>
      
    </ul>
    
  </div>
  <hr>
  <div id=links>
    
    <a href="https://longrichli.github.io/posts/gcc%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/">&laquo;&nbsp;gccä½¿ç”¨æ•™ç¨‹</a>
    
    
  </div>
</section>
<script src="https://utteranc.es/client.js"
        repo="longrichli/blog-comments"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>


      <script async src="https://www.googletagmanager.com/gtag/js?id=G-JHKFGEGXJ0"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-JHKFGEGXJ0');
        }
      </script>

<dev id="toggle-theme">ğŸŒ™</dev>
<script src="https://longrichli.github.io/js/theme.js"></script>
<script src="https://longrichli.github.io/js/clip.js"></script>
</body>

</html>